# This file was generated by Firebase Studio
#
# Deploy to the live channel when a push is made to the main branch
#
# To successfully deploy, you'll need to create a `FIREBASE_SERVICE_ACCOUNT`
# secret in your GitHub repository settings.
#
# 1. Go to your project's `Settings` tab in the Firebase console.
# 2. Under `Project settings`, go to the `Service accounts` tab.
# 3. Click `Generate new private key` to download a JSON file.
# 4. In your GitHub repository, go to `Settings` > `Secrets and variables` > `Actions`.
# 5. Click `New repository secret` and name it `FIREBASE_SERVICE_ACCOUNT`.
# 6. Paste the entire content of the downloaded JSON file into the secret value.

name: Deploy to Firebase Hosting (Live)

on:
  push:
    branches:
      - main

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Node
        uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm ci
      - run: npm run test --if-present
      - run: npm run build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: "${{ secrets.GITHUB_TOKEN }}"
          firebaseServiceAccount: "${{ secrets.FIREBASE_SERVICE_ACCOUNT }}"
          projectId: your-firebase-project-id
          channelId: live
        env:
          FIREBASE_CLI_PREVIEWS: hostingchannels