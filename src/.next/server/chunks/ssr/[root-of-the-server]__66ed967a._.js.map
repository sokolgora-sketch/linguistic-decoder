{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/accordion.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,YAAY,qKAAA,CAAA,OAAuB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QACzB,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG;AAE5B,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,SAAyB;QAAC,WAAU;kBACnC,cAAA,8OAAC,qKAAA,CAAA,UAA0B;YACzB,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,gIACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI7B,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW;AAErE,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,qKAAA,CAAA,UAA0B;QACzB,KAAK;QACL,WAAU;QACT,GAAG,KAAK;kBAET,cAAA,8OAAC;YAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,aAAa;sBAAa;;;;;;;;;;;AAIjD,iBAAiB,WAAW,GAAG,qKAAA,CAAA,UAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/Candidates.tsx"],"sourcesContent":["\n'use client';\nimport type { LanguageFamily } from \"../shared/engineShape\";\nimport { Card } from \"./ui/card\";\n\nexport function Candidates({ items }: { items?: LanguageFamily[] }) {\n  if (!items || items.length === 0) return null;\n\n  // Filter out families with a confidence of 0\n  const visibleFamilies = items.filter(f => (f.confidence || 0) > 0);\n  if (visibleFamilies.length === 0) return null;\n\n  // A simple way to get dialect from rationale if it exists.\n  const getDialect = (family: LanguageFamily) => {\n    // The new detector doesn't put dialect in rationale, so we check familyId\n    if (family.familyId !== 'albanian') return null;\n\n    // Check for the dialect property directly on the family object\n    if ((family as any).dialect) return (family as any).dialect;\n    \n    // Heuristic: if rationale contains Gegë/Tosk cues, use them.\n    // This part is less critical now that the main detector is better.\n    const r = family.rationale?.toLowerCase() || \"\";\n    if (r.includes('geg')) return 'geg';\n    if (r.includes('tosk')) return 'tosk';\n    \n    // Fallback for older data or different rationale formats\n    const match = r.match(/dialect: (geg|tosk)/);\n    return match?.[1];\n  };\n\n  return (\n    <div className=\"mt-3\">\n      <h3 className=\"font-bold text-sm tracking-wide mb-2\">Language Family Candidates</h3>\n      <div className=\"space-y-2\">\n        {visibleFamilies.map((f, i) => {\n          const dialect = getDialect(f) || f.dialect;\n          return (\n            <Card key={f.familyId || i} className=\"p-2.5 text-sm border-primary/50\">\n               <div className=\"flex items-center gap-2\">\n                  <div className=\"min-w-[180px] font-semibold\">\n                    {f.label}\n                    {f.label === \"Albanian\" && dialect && (\n                      <span className=\"ml-2 text-xs px-2 py-0.5 rounded-full bg-accent/20 text-accent-foreground font-medium\">\n                        {dialect === \"geg\" ? \"Gegë\" : \"Tosk\"}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"font-bold text-lg text-primary\">{((f.confidence || 0) * 100).toFixed(0)}%</div>\n               </div>\n\n              {f.signals && f.signals.length > 0 && (\n                <div className=\"text-xs opacity-80 mt-1.5 pt-1.5 border-t\">\n                  {f.signals.slice(0, 3).join(\" · \")}\n                </div>\n              )}\n            </Card>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAFA;;;AAIO,SAAS,WAAW,EAAE,KAAK,EAAgC;IAChE,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG,OAAO;IAEzC,6CAA6C;IAC7C,MAAM,kBAAkB,MAAM,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,UAAU,IAAI,CAAC,IAAI;IAChE,IAAI,gBAAgB,MAAM,KAAK,GAAG,OAAO;IAEzC,2DAA2D;IAC3D,MAAM,aAAa,CAAC;QAClB,0EAA0E;QAC1E,IAAI,OAAO,QAAQ,KAAK,YAAY,OAAO;QAE3C,+DAA+D;QAC/D,IAAI,AAAC,OAAe,OAAO,EAAE,OAAO,AAAC,OAAe,OAAO;QAE3D,6DAA6D;QAC7D,mEAAmE;QACnE,MAAM,IAAI,OAAO,SAAS,EAAE,iBAAiB;QAC7C,IAAI,EAAE,QAAQ,CAAC,QAAQ,OAAO;QAC9B,IAAI,EAAE,QAAQ,CAAC,SAAS,OAAO;QAE/B,yDAAyD;QACzD,MAAM,QAAQ,EAAE,KAAK,CAAC;QACtB,OAAO,OAAO,CAAC,EAAE;IACnB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAuC;;;;;;0BACrD,8OAAC;gBAAI,WAAU;0BACZ,gBAAgB,GAAG,CAAC,CAAC,GAAG;oBACvB,MAAM,UAAU,WAAW,MAAM,EAAE,OAAO;oBAC1C,qBACE,8OAAC,gIAAA,CAAA,OAAI;wBAAuB,WAAU;;0CACnC,8OAAC;gCAAI,WAAU;;kDACZ,8OAAC;wCAAI,WAAU;;4CACZ,EAAE,KAAK;4CACP,EAAE,KAAK,KAAK,cAAc,yBACzB,8OAAC;gDAAK,WAAU;0DACb,YAAY,QAAQ,SAAS;;;;;;;;;;;;kDAIpC,8OAAC;wCAAI,WAAU;;4CAAkC,CAAC,CAAC,EAAE,UAAU,IAAI,CAAC,IAAI,GAAG,EAAE,OAAO,CAAC;4CAAG;;;;;;;;;;;;;4BAG3F,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC,MAAM,GAAG,mBAC/B,8OAAC;gCAAI,WAAU;0CACZ,EAAE,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;;;;;;;uBAfvB,EAAE,QAAQ,IAAI;;;;;gBAoB7B;;;;;;;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/functions/languages.ts"],"sourcesContent":["export type CClass =\n  | \"Glide\" | \"Liquid\" | \"Nasal\"\n  | \"NonSibilantFricative\" | \"SibilantFricative\"\n  | \"Affricate\" | \"Plosive\";\n\nexport type LangProfile = {\n  id: \"albanian\" | \"latin\" | \"sanskrit\" | \"ancient_greek\" | \"pie\" | string;\n  detect: (w: string) => boolean;\n  DIGRAPH: Record<string, CClass>;\n  LETTER: Record<string, CClass>;\n  pre?: (s: string) => string;\n};\n\nexport function classRange(cls: CClass): [number, number] {\n  switch (cls) {\n    case \"Glide\":\n    case \"Liquid\":\n    case \"Nasal\": return [0, 1];\n    case \"NonSibilantFricative\": return [1, 1];\n    case \"SibilantFricative\":\n    case \"Affricate\": return [1, 2];\n    case \"Plosive\": return [2, 3];\n  }\n}\n\nexport const Albanian: LangProfile = {\n  id: \"albanian\",\n  detect: (w) => /[ëç]|xh|zh|sh|dh|th|nj|gj|ll|rr|q/i.test(w),\n  DIGRAPH: {\n    \"ll\": \"Liquid\", \"rr\": \"Liquid\",\n    \"nj\": \"Nasal\",\n    \"sh\": \"SibilantFricative\", \"zh\": \"SibilantFricative\",\n    \"dh\": \"NonSibilantFricative\", \"th\": \"NonSibilantFricative\",\n    \"xh\": \"Affricate\",\n    \"gj\": \"Plosive\",\n  },\n  LETTER: {\n    c: \"Affricate\", ç: \"Affricate\", x: \"Affricate\",\n    q: \"Plosive\", k: \"Plosive\", g: \"Plosive\", p: \"Plosive\", b: \"Plosive\", t: \"Plosive\", d: \"Plosive\",\n    f: \"NonSibilantFricative\", v: \"NonSibilantFricative\", h: \"NonSibilantFricative\",\n    s: \"SibilantFricative\", z: \"SibilantFricative\",\n    j: \"Glide\",\n    m: \"Nasal\", n: \"Nasal\",\n    l: \"Liquid\", r: \"Liquid\",\n    w: \"Glide\",\n  },\n};\n\nexport const Latin: LangProfile = {\n  id: \"latin\",\n  detect: () => false, // Fallback\n  DIGRAPH: {\n    \"ch\": \"Affricate\", \"ts\": \"Affricate\", \"dz\": \"Affricate\",\n    \"sh\": \"SibilantFricative\", \"zh\": \"SibilantFricative\",\n    \"th\": \"NonSibilantFricative\", \"ph\": \"NonSibilantFricative\",\n    \"ck\": \"Plosive\",\n  },\n  LETTER: {\n    p: \"Plosive\", b: \"Plosive\", t: \"Plosive\", d: \"Plosive\", k: \"Plosive\", g: \"Plosive\", q: \"Plosive\", c: \"Plosive\",\n    f: \"NonSibilantFricative\", v: \"NonSibilantFricative\", h: \"NonSibilantFricative\",\n    s: \"SibilantFricative\", z: \"SibilantFricative\", x: \"SibilantFricative\",\n    j: \"Affricate\",\n    m: \"Nasal\", n: \"Nasal\",\n    l: \"Liquid\", r: \"Liquid\",\n    w: \"Glide\", y: \"Glide\",\n  },\n};\n\nexport const Turkish: LangProfile = {\n  id: \"turkish\",\n  detect: (w) => /[çğşıöü]|sch|tsch|ç|ş|c(?!h)|j/i.test(w),\n  DIGRAPH: {\n    \"ch\": \"Affricate\",\n    \"sch\": \"SibilantFricative\", \"tsch\": \"Affricate\",\n  },\n  LETTER: {\n    c: \"Affricate\",\n    ç: \"Affricate\",\n    s: \"SibilantFricative\", z: \"SibilantFricative\", ş: \"SibilantFricative\", j: \"SibilantFricative\",\n    f: \"NonSibilantFricative\", v: \"NonSibilantFricative\", h: \"NonSibilantFricative\",\n    p: \"Plosive\", b: \"Plosive\", t: \"Plosive\", d: \"Plosive\", k: \"Plosive\", g: \"Plosive\", q: \"Plosive\",\n    m: \"Nasal\", n: \"Nasal\",\n    l: \"Liquid\", r: \"Liquid\",\n    y: \"Glide\", w: \"Glide\",\n    ğ: \"Glide\",\n    x: \"SibilantFricative\",\n  },\n};\n\nexport const German: LangProfile = {\n  id: \"german\",\n  detect: (w) => /sch|tsch|qu|pf|sp|st|ä|ö|ü|ß/i.test(w),\n  DIGRAPH: {\n    \"sch\": \"SibilantFricative\",\n    \"tsch\": \"Affricate\",\n    \"ch\": \"NonSibilantFricative\",\n    \"qu\": \"Plosive\",\n    \"ck\": \"Plosive\",\n    \"pf\": \"Plosive\",\n    \"ts\": \"Affricate\",\n  },\n  LETTER: {\n    p: \"Plosive\", b: \"Plosive\", t: \"Plosive\", d: \"Plosive\", k: \"Plosive\", g: \"Plosive\", q: \"Plosive\", c: \"Plosive\",\n    f: \"NonSibilantFricative\", v: \"NonSibilantFricative\", h: \"NonSibilantFricative\",\n    s: \"SibilantFricative\", z: \"SibilantFricative\", ß: \"SibilantFricative\", x: \"SibilantFricative\",\n    j: \"Affricate\",\n    m: \"Nasal\", n: \"Nasal\",\n    l: \"Liquid\", r: \"Liquid\",\n    w: \"Glide\", y: \"Glide\",\n  },\n};\n\nexport const Sanskrit: LangProfile = {\n  id: \"sanskrit\",\n  // IAST markers or common ASCII surrogates\n  detect: (w) => /[āīūṛṝḷḹṅñṇṭḍśṣḥṃṁ]|kh|gh|ch|jh|ṭ|ḍ|ś|ṣ/i.test(w),\n  DIGRAPH: {\n    // aspirated plosives → Plosive\n    kh:\"Plosive\", gh:\"Plosive\", th:\"Plosive\", dh:\"Plosive\", ph:\"Plosive\", bh:\"Plosive\",\n    // palatal affricates\n    ch:\"Affricate\", jh:\"Affricate\",\n    // clusters often seen\n    ks:\"SibilantFricative\", kṣ:\"SibilantFricative\", // ASCII & IAST\n  },\n  LETTER: {\n    // plosives (incl. retroflex)\n    k:\"Plosive\", g:\"Plosive\", t:\"Plosive\", d:\"Plosive\", p:\"Plosive\", b:\"Plosive\",\n    ṭ:\"Plosive\", ḍ:\"Plosive\", q:\"Plosive\",\n    // affricates\n    c:\"Affricate\", j:\"Affricate\",\n    // sibilants\n    s:\"SibilantFricative\", ś:\"SibilantFricative\", ṣ:\"SibilantFricative\", z:\"SibilantFricative\",\n    // non-sibilant fricatives/approximants\n    f:\"NonSibilantFricative\", v:\"NonSibilantFricative\", h:\"NonSibilantFricative\",\n    // sonorants\n    m:\"Nasal\", n:\"Nasal\", ñ:\"Nasal\", ṅ:\"Nasal\", ṇ:\"Nasal\",\n    l:\"Liquid\", r:\"Liquid\",\n    y:\"Glide\", w:\"Glide\",\n  },\n};\n\nfunction greekPre(s: string): string {\n  // Map Greek letters → ASCII tokens (minimal, deterministic)\n  return s\n    .replace(/[άὰᾶἀἁἄἅἂἃα]/g,\"a\")\n    .replace(/[έὲἐἑἔἕἒἓε]/g,\"e\")\n    .replace(/[ίὶῖἰἱἴἵἲἳι]/g,\"i\")\n    .replace(/[όὸοὀὁὄὅὂὃ]/g,\"o\")\n    .replace(/[ύὺῦυὐὑὔὕὒὓ]/g,\"y\")\n    .replace(/[ώὼωὠὡὤὥὢὣ]/g,\"o\")\n\n    .replace(/[β]/g,\"b\").replace(/[γ]/g,\"g\").replace(/[δ]/g,\"d\")\n    .replace(/[ζ]/g,\"z\").replace(/[θ]/g,\"th\")\n    .replace(/[κ]/g,\"k\").replace(/[λ]/g,\"l\").replace(/[μ]/g,\"m\").replace(/[ν]/g,\"n\")\n    .replace(/[ξ]/g,\"ks\").replace(/[π]/g,\"p\").replace(/[ρ]/g,\"r\")\n    .replace(/[σς]/g,\"s\").replace(/[τ]/g,\"t\")\n    .replace(/[φ]/g,\"ph\")   // classical: aspirated Plosive\n    .replace(/[χ]/g,\"kh\")   // aspirated Plosive\n    .replace(/[ψ]/g,\"ps\")\n    ;\n}\n\nexport const AncientGreek: LangProfile = {\n  id: \"ancient_greek\",\n  detect: (w) => /[ἀ-῾φθχψξβγδζκλμνπρστσς]/i.test(w) || /(ph|th|kh|ps|ks)\\b/i.test(w),\n  pre: greekPre,\n  DIGRAPH: {\n    ph:\"Plosive\", th:\"Plosive\", kh:\"Plosive\",\n    ps:\"Plosive\", ks:\"SibilantFricative\",   // treat ks as sibilant cluster\n    ch:\"NonSibilantFricative\",              // for latinized 'ch' variants if present\n  },\n  LETTER: {\n    p:\"Plosive\", b:\"Plosive\", t:\"Plosive\", d:\"Plosive\", k:\"Plosive\", g:\"Plosive\",\n    z:\"Affricate\",                           // ζ ~ [dz]/[zd] → affricate-ish\n    s:\"SibilantFricative\", x:\"SibilantFricative\",\n    f:\"NonSibilantFricative\", v:\"NonSibilantFricative\", h:\"NonSibilantFricative\",\n    m:\"Nasal\", n:\"Nasal\",\n    l:\"Liquid\", r:\"Liquid\",\n    w:\"Glide\", y:\"Glide\",\n  },\n};\n\nfunction piePre(s: string): string {\n  return s\n    .toLowerCase()\n    .replace(/\\*/g,\"\")           // strip asterisk\n    .replace(/[h₁₁]/g,\"h\")       // h₁ → h\n    .replace(/[h₂₂]/g,\"h\")\n    .replace(/[h₃₃]/g,\"h\")\n    .normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g,\"\"); // fold diacritics (ḱ→k, ǵ→g)\n}\n\nexport const PIE: LangProfile = {\n  id: \"pie\",\n  detect: (w) => /\\*|h[₁₂₃]|[ḱǵ]|gʷ|kʷ|bh|dh|gh/i.test(w),\n  pre: piePre,\n  DIGRAPH: {\n    // labiovelars & aspirates → Plosive\n    \"kw\":\"Plosive\", \"gw\":\"Plosive\", \"gwh\":\"Plosive\",\n    \"kh\":\"Plosive\", \"gh\":\"Plosive\", \"th\":\"Plosive\", \"dh\":\"Plosive\", \"ph\":\"Plosive\", \"bh\":\"Plosive\",\n    // clusters\n    \"ks\":\"SibilantFricative\",\n  },\n  LETTER: {\n    // plosives (incl palatovelars after diacritic fold)\n    p:\"Plosive\", b:\"Plosive\", t:\"Plosive\", d:\"Plosive\", k:\"Plosive\", g:\"Plosive\", q:\"Plosive\", c:\"Plosive\",\n    // sibilant\n    s:\"SibilantFricative\", z:\"SibilantFricative\", x:\"SibilantFricative\",\n    // non-sibilant / laryngeals\n    h:\"NonSibilantFricative\", f:\"NonSibilantFricative\", v:\"NonSibilantFricative\",\n    // sonorants\n    m:\"Nasal\", n:\"Nasal\",\n    l:\"Liquid\", r:\"Liquid\",\n    y:\"Glide\", w:\"Glide\",\n    j:\"Glide\",\n  },\n};\n\n\nexport const PROFILES: LangProfile[] = [PIE, Sanskrit, AncientGreek, Albanian, Turkish, German, Latin];\n\nexport function chooseProfile(word: string, overrideId?: string): LangProfile {\n  if (overrideId) {\n    const p = PROFILES.find(p => p.id === overrideId);\n    if (p) return p;\n  }\n  return PROFILES.find(p => p.detect(word)) || Latin;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 942, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/principles.ts"],"sourcesContent":["\nimport type { EnginePayload } from \"@/shared/engineShape\";\n\nexport const PRINCIPLES: Record<string, {label:string; color:string}> = {\n  A: { label:\"Truth\",              color:\"#E53935\" },  // Red\n  E: { label:\"Expansion\",          color:\"#FB8C00\" },  // Orange\n  I: { label:\"Insight\",            color:\"#FDD835\" },  // Yellow\n  O: { label:\"Balance\",            color:\"#43A047\" },  // Green\n  U: { label:\"Unity\",              color:\"#1E88E5\" },  // Blue\n  Y: { label:\"Network Integrity\",  color:\"#3949AB\" },  // Indigo\n  Ë: { label:\"Evolution\",          color:\"#8E24AA\" },  // Violet\n};\n\nconst ORDER = [\"A\",\"E\",\"I\",\"O\",\"U\",\"Y\",\"Ë\"] as const;\n\nexport function summarizePrinciples(engine: EnginePayload) {\n  const vp: string[] = engine?.primaryPath?.voicePath ?? [];\n  const counts: Record<string, number> = {A:0,E:0,I:0,O:0,U:0,Y:0,Ë:0};\n  vp.forEach(v => { if (counts[v] !== undefined) counts[v]++; });\n\n  // Dominant = by count, tie-break by ORDER index\n  const dominant = ORDER\n    .map(k=>({k, n:counts[k]}))\n    .sort((a,b)=> b.n - a.n || ORDER.indexOf(a.k as any) - ORDER.indexOf(b.k as any))\n    .slice(0,3)\n    .filter(x=>x.n>0);\n\n  const pathLabels = vp.map(v => PRINCIPLES[v].label);\n  const sevenWords = ORDER.map(v => PRINCIPLES[v].label).join(\" \");\n\n  return {\n    counts,\n    dominant: dominant.map(d => ({ voice:d.k, label:PRINCIPLES[d.k].label, hits:d.n })),\n    pathLabel: pathLabels.join(\" → \"),\n    sevenWords, // fixed 7-word checksum line\n  };\n}\n"],"names":[],"mappings":";;;;AAGO,MAAM,aAA2D;IACtE,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;IACjD,GAAG;QAAE,OAAM;QAAsB,OAAM;IAAU;AACnD;AAEA,MAAM,QAAQ;IAAC;IAAI;IAAI;IAAI;IAAI;IAAI;IAAI;CAAI;AAEpC,SAAS,oBAAoB,MAAqB;IACvD,MAAM,KAAe,QAAQ,aAAa,aAAa,EAAE;IACzD,MAAM,SAAiC;QAAC,GAAE;QAAE,GAAE;QAAE,GAAE;QAAE,GAAE;QAAE,GAAE;QAAE,GAAE;QAAE,GAAE;IAAC;IACnE,GAAG,OAAO,CAAC,CAAA;QAAO,IAAI,MAAM,CAAC,EAAE,KAAK,WAAW,MAAM,CAAC,EAAE;IAAI;IAE5D,gDAAgD;IAChD,MAAM,WAAW,MACd,GAAG,CAAC,CAAA,IAAG,CAAC;YAAC;YAAG,GAAE,MAAM,CAAC,EAAE;QAAA,CAAC,GACxB,IAAI,CAAC,CAAC,GAAE,IAAK,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,MAAM,OAAO,CAAC,EAAE,CAAC,IAAW,MAAM,OAAO,CAAC,EAAE,CAAC,GACvE,KAAK,CAAC,GAAE,GACR,MAAM,CAAC,CAAA,IAAG,EAAE,CAAC,GAAC;IAEjB,MAAM,aAAa,GAAG,GAAG,CAAC,CAAA,IAAK,UAAU,CAAC,EAAE,CAAC,KAAK;IAClD,MAAM,aAAa,MAAM,GAAG,CAAC,CAAA,IAAK,UAAU,CAAC,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC;IAE5D,OAAO;QACL;QACA,UAAU,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,OAAM,EAAE,CAAC;gBAAE,OAAM,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK;gBAAE,MAAK,EAAE,CAAC;YAAC,CAAC;QACjF,WAAW,WAAW,IAAI,CAAC;QAC3B;IACF;AACF","debugId":null}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ResultsDisplay.tsx"],"sourcesContent":["\n'use client';\nimport React, { useMemo } from \"react\";\nimport { Card } from \"./ui/card\";\nimport type { CClass } from \"../functions/languages\";\nimport { classRange } from \"../functions/languages\";\nimport type { EnginePayload, EnginePath } from \"../shared/engineShape\";\nimport { summarizePrinciples } from \"../lib/principles\";\nimport WhyThisPath from \"./WhyThisPath\";\n\n// Seven‑Voices palette (uses CSS variables from globals.css)\nconst VOICE_COLOR: Record<string, string> = {\n  A: \"var(--voice-A)\",\n  E: \"var(--voice-E)\",\n  I: \"var(--voice-I)\",\n  O: \"var(--voice-O)\",\n  U: \"var(--voice-U)\",\n  Y: \"var(--voice-Y)\",\n  \"Ë\": \"var(--voice-EH)\"\n};\n\nconst LEVEL_LABEL: Record<number, string> = { 1: \"High\", 0: \"Mid\", [-1]: \"Low\" } as any;\nconst labelLevels = (levels: number[]) => levels.map(l=> LEVEL_LABEL[l] ?? l).join(\" → \");\nconst labelRings = (rings: number[]) => rings.join(\" → \");\n\nconst Arrow = () => <span className=\"font-bold text-accent\">→</span>;\nconst Chip = ({ v }: { v: string | number }) => (\n    <span className=\"inline-flex items-center gap-1.5 py-1 px-2 rounded-full border bg-card text-card-foreground\">\n      <span className=\"w-2.5 h-2.5 rounded-full inline-block\" style={{ background: VOICE_COLOR[String(v)] || 'hsl(var(--primary))' }} />\n      <span className=\"font-bold\">{String(v)}</span>\n    </span>\n);\n\nfunction ConsonantInfo({ analysis }: { analysis: EnginePayload }) {\n  const { windows, windowClasses, primaryPath, edgeWindows } = analysis;\n  const ringPath = primaryPath?.ringPath;\n\n  const hasInteriorWindows = windows && windowClasses && windows.length > 0;\n  const hasEdgeWindows = edgeWindows && edgeWindows.length > 0;\n\n  if (!hasInteriorWindows && !hasEdgeWindows) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-2.5\">\n      <h4 className=\"text-xs text-slate-500 mb-1\">Consonant Influence</h4>\n      \n      {hasInteriorWindows && (\n        <div className=\"flex flex-col gap-1.5\">\n          {windows.map((w, i) => {\n            const cClass = windowClasses[i] as CClass;\n            const [lo, hi] = classRange(cClass);\n            let hopInfo = \"\";\n            if (ringPath && i < ringPath.length - 1) {\n              const delta = Math.abs(ringPath[i+1] - ringPath[i]);\n              const isOptimal = delta >= lo && delta <= hi;\n              hopInfo = `|Δring| = ${delta} ${isOptimal ? \"✓\" : \"✗\"}`;\n            }\n\n            return (\n              <Card key={i} className=\"p-2.5 text-sm font-code flex justify-between items-center\">\n                <span>'{w}' is <span className=\"font-semibold\">{cClass}</span> (prefers {lo}–{hi})</span>\n                <span className=\"font-semibold\">{hopInfo}</span>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n\n      {hasEdgeWindows && (\n        <div className=\"text-xs text-muted-foreground mt-2 pt-2 border-t\">\n          <b>Edge:</b> {edgeWindows.join(\" · \")}\n        </div>\n      )}\n    </div>\n  );\n}\n\n\nexport function PathRow({ title, block, analysis }: { title: string; block?: EnginePath, analysis: EnginePayload }) {\n  if (!block || !block.voicePath || block.voicePath.length === 0) {\n    return (\n      <Card className=\"p-4\">\n        <h3 className=\"font-bold text-sm tracking-wide mb-2\">{title}</h3>\n        <div className=\"text-xs opacity-60\">— no path —</div>\n      </Card>\n    );\n  }\n\n  const { voicePath, ringPath, levelPath, checksums, ops, kept } = block;\n\n  return (\n    <Card className=\"p-4\">\n      <h3 className=\"font-bold text-sm tracking-wide mb-2\">{title}</h3>\n\n      <>\n        <div className=\"flex flex-wrap gap-2 items-center\">\n          {voicePath.map((v,i)=>(\n            <React.Fragment key={`v-${i}`}>\n              <Chip v={v} />{i<voicePath.length-1 && <Arrow/>}\n            </React.Fragment>\n          ))}\n        </div>\n\n        <div className=\"mt-2.5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2.5\">\n            <InfoLine label=\"Voice Path\" value={voicePath.join(\" → \")} />\n            <InfoLine label=\"Level Path\" value={labelLevels(levelPath)} />\n            <InfoLine label=\"Ring Path\" value={labelRings(ringPath)} />\n            {checksums && (\n                <InfoLine label=\"Checksums\" value={`V=${checksums.V} · E=${checksums.E.toFixed(2)} · C=${checksums.C}`} mono />\n            )}\n            {typeof kept === \"number\" ? <InfoLine label=\"Keeps\" value={String(kept)} /> : null}\n        </div>\n        \n        {title === \"Primary Path\" && <ConsonantInfo analysis={analysis} />}\n\n        {ops?.length > 0 && (\n          <div className=\"mt-2.5\">\n            <h4 className=\"font-bold text-sm tracking-wide\">Ops</h4>\n            <div className=\"font-code text-xs whitespace-pre-wrap\">{ops.join(\"; \")}</div>\n          </div>\n        )}\n      </>\n    </Card>\n  );\n}\n\nfunction InfoLine({label, value, mono}:{label:string; value:string; mono?:boolean}){\n  return (\n    <Card className=\"p-2.5 flex flex-col gap-1\">\n      <span className=\"text-xs text-slate-500\">{label}</span>\n      <span className={`font-semibold ${mono ? \"font-code\":\"\"}`}>{value}</span>\n    </Card>\n  );\n}\n\nexport function PrinciplesBlock({ engine }: { engine:any }) {\n  if (!engine?.primaryPath?.voicePath?.length) return null;\n  const s = summarizePrinciples(engine);\n  return (\n    <div className=\"mt-3 border rounded p-2 text-sm\">\n      <div className=\"font-semibold mb-1\">Seven Principles</div>\n      <div className=\"opacity-80\">Path: {s.pathLabel}</div>\n      {s.dominant.length > 0 && (\n        <div className=\"opacity-80\">\n          Dominant: {s.dominant.map(x=>`${x.label} (${x.hits})`).join(\", \")}\n        </div>\n      )}\n      <div className=\"opacity-60 text-xs mt-1\">7 words: {s.sevenWords}</div>\n    </div>\n  );\n}\n\nexport function ResultsDisplay({ analysis }: { analysis: EnginePayload }) {\n    const { primaryPath, frontierPaths } = analysis;\n\n    const frontierList = useMemo(() => (frontierPaths || []).filter(f => f?.voicePath && f.voicePath.join(\"\") !== (primaryPath?.voicePath || []).join(\"\")), [frontierPaths, primaryPath]);\n\n    if (!primaryPath) return null;\n    \n    return (\n        <>\n            <PathRow block={primaryPath} title=\"Primary Path\" analysis={analysis} />\n            <PrinciplesBlock engine={analysis} />\n            {frontierList.length > 0 && (\n              <Card className=\"p-4\">\n                <h3 className=\"font-bold text-sm tracking-wide\">Frontier (near‑optimal alternates)</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mt-3\">\n                  {frontierList.map((f, idx)=> (\n                    <Card key={idx} className=\"p-3 border-accent\">\n                      <div className=\"font-bold mb-2\">Alt #{idx+1}</div>\n                      <div className=\"flex flex-wrap gap-1.5 items-center\">\n                        {f.voicePath.map((v,i)=> (\n                          <React.Fragment key={i}>\n                            <Chip v={v} />\n                            {i < f.voicePath.length-1 && <Arrow/>}\n                          </React.Fragment>\n                        ))}\n                      </div>\n                      <hr className=\"my-2 border-border\" />\n                      {f.checksums && <div className=\"font-code text-xs\">V={f.checksums.V} · E={f.checksums.E.toFixed(2)} · C={f.checksums.C}</div>}\n                      <div className=\"font-code text-xs mt-1\">Keeps: {typeof f.kept === \"number\" ? f.kept : \"—\"}</div>\n                      <div className=\"text-xs mt-1.5 text-slate-500\">Levels: {labelLevels(f.levelPath)}</div>\n                      <div className=\"text-xs text-slate-500\">Rings: {labelRings(f.ringPath)}</div>\n                    </Card>\n                  ))}\n                </div>\n              </Card>\n            )}\n        </>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1594, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1704, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ConsonantReference.tsx"],"sourcesContent":["\n'use client';\nimport { Card } from \"./ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"./ui/table\";\nimport type { Vowel } from \"../functions/sevenVoicesCore\";\n\nconst VOICE_COLOR: Record<Vowel, string> = {\n    A: \"var(--voice-A)\", E: \"var(--voice-E)\", I: \"var(--voice-I)\",\n    O: \"var(--voice-O)\", U: \"var(--voice-U)\", Y: \"var(--voice-Y)\", \"Ë\": \"var(--voice-EH)\"\n};\n\ntype ConsonantClassInfo = {\n    class: string;\n    examples: string;\n    preferredDeltaRing: string;\n    voiceAlign: Vowel;\n};\n\nconst referenceData: ConsonantClassInfo[] = [\n    { class: \"Plosive\", examples: \"p, b, t, d, k, g, q, c, ck, gj\", preferredDeltaRing: \"2–3\", voiceAlign: \"A\" },\n    { class: \"Affricate\", examples: \"ch, j, dz, ts, dʒ, tʃ, ç, xh\", preferredDeltaRing: \"1–2\", voiceAlign: \"I\" },\n    { class: \"Sibilant Fricative\", examples: \"s, z, sh, zh, x\", preferredDeltaRing: \"1–2\", voiceAlign: \"Y\" },\n    { class: \"Non-sibilant Fricative\", examples: \"f, v, h, th, ph, dh\", preferredDeltaRing: \"1\", voiceAlign: \"E\" },\n    { class: \"Nasal\", examples: \"m, n, nj\", preferredDeltaRing: \"0–1\", voiceAlign: \"Ë\" },\n    { class: \"Liquid\", examples: \"l, r, ll, rr\", preferredDeltaRing: \"0–1\", voiceAlign: \"O\" },\n    { class: \"Glide\", examples: \"w, y\", preferredDeltaRing: \"0–1\", voiceAlign: \"U\" },\n];\n\nexport function ConsonantReference() {\n    return (\n        <Card className=\"p-4\">\n            <p className=\"text-sm text-slate-600 mb-4\">\n                The consonant(s) between vowels influence the consonant checksum (<span className=\"font-code\">C</span>). Hops that align with the consonant’s preferred ring distance change (<code className=\"font-code\">|Δring|</code>) have a lower cost.\n            </p>\n            <Table>\n                <TableHeader>\n                    <TableRow>\n                        <TableHead>Class</TableHead>\n                        <TableHead>Examples</TableHead>\n                        <TableHead>Preferred |Δring|</TableHead>\n                        <TableHead>Voice Align</TableHead>\n                    </TableRow>\n                </TableHeader>\n                <TableBody>\n                    {referenceData.map((row) => (\n                        <TableRow key={row.class}>\n                            <TableCell className=\"font-medium\">{row.class}</TableCell>\n                            <TableCell className=\"font-code text-slate-500\">{row.examples}</TableCell>\n                            <TableCell className=\"font-code\">{row.preferredDeltaRing}</TableCell>\n                            <TableCell>\n                                <span className=\"inline-flex items-center gap-1.5 py-1 px-2 rounded-full border bg-card text-card-foreground\">\n                                    <span className=\"w-2.5 h-2.5 rounded-full inline-block\" style={{ background: VOICE_COLOR[row.voiceAlign] }} />\n                                    <span className=\"font-bold\">{row.voiceAlign}</span>\n                                </span>\n                            </TableCell>\n                        </TableRow>\n                    ))}\n                </TableBody>\n            </Table>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAFA;;;;AAKA,MAAM,cAAqC;IACvC,GAAG;IAAkB,GAAG;IAAkB,GAAG;IAC7C,GAAG;IAAkB,GAAG;IAAkB,GAAG;IAAkB,KAAK;AACxE;AASA,MAAM,gBAAsC;IACxC;QAAE,OAAO;QAAW,UAAU;QAAkC,oBAAoB;QAAO,YAAY;IAAI;IAC3G;QAAE,OAAO;QAAa,UAAU;QAAgC,oBAAoB;QAAO,YAAY;IAAI;IAC3G;QAAE,OAAO;QAAsB,UAAU;QAAmB,oBAAoB;QAAO,YAAY;IAAI;IACvG;QAAE,OAAO;QAA0B,UAAU;QAAuB,oBAAoB;QAAK,YAAY;IAAI;IAC7G;QAAE,OAAO;QAAS,UAAU;QAAY,oBAAoB;QAAO,YAAY;IAAI;IACnF;QAAE,OAAO;QAAU,UAAU;QAAgB,oBAAoB;QAAO,YAAY;IAAI;IACxF;QAAE,OAAO;QAAS,UAAU;QAAQ,oBAAoB;QAAO,YAAY;IAAI;CAClF;AAEM,SAAS;IACZ,qBACI,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACZ,8OAAC;gBAAE,WAAU;;oBAA8B;kCAC2B,8OAAC;wBAAK,WAAU;kCAAY;;;;;;oBAAQ;kCAAwE,8OAAC;wBAAK,WAAU;kCAAY;;;;;;oBAAc;;;;;;;0BAE5N,8OAAC,iIAAA,CAAA,QAAK;;kCACF,8OAAC,iIAAA,CAAA,cAAW;kCACR,cAAA,8OAAC,iIAAA,CAAA,WAAQ;;8CACL,8OAAC,iIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,8OAAC,iIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,8OAAC,iIAAA,CAAA,YAAS;8CAAC;;;;;;8CACX,8OAAC,iIAAA,CAAA,YAAS;8CAAC;;;;;;;;;;;;;;;;;kCAGnB,8OAAC,iIAAA,CAAA,YAAS;kCACL,cAAc,GAAG,CAAC,CAAC,oBAChB,8OAAC,iIAAA,CAAA,WAAQ;;kDACL,8OAAC,iIAAA,CAAA,YAAS;wCAAC,WAAU;kDAAe,IAAI,KAAK;;;;;;kDAC7C,8OAAC,iIAAA,CAAA,YAAS;wCAAC,WAAU;kDAA4B,IAAI,QAAQ;;;;;;kDAC7D,8OAAC,iIAAA,CAAA,YAAS;wCAAC,WAAU;kDAAa,IAAI,kBAAkB;;;;;;kDACxD,8OAAC,iIAAA,CAAA,YAAS;kDACN,cAAA,8OAAC;4CAAK,WAAU;;8DACZ,8OAAC;oDAAK,WAAU;oDAAwC,OAAO;wDAAE,YAAY,WAAW,CAAC,IAAI,UAAU,CAAC;oDAAC;;;;;;8DACzG,8OAAC;oDAAK,WAAU;8DAAa,IAAI,UAAU;;;;;;;;;;;;;;;;;;+BAPxC,IAAI,KAAK;;;;;;;;;;;;;;;;;;;;;;AAgBhD","debugId":null}},
    {"offset": {"line": 1933, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/TwoRailsWithConsonants.tsx"],"sourcesContent":["\n\"use client\";\n\nimport * as React from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ntype Vowel = \"A\" | \"E\" | \"I\" | \"O\" | \"U\" | \"Y\" | \"Ë\";\nconst ORDER: Vowel[] = [\"A\", \"E\", \"I\", \"O\", \"U\", \"Y\", \"Ë\"];\nconst VOICE_COLOR: Record<Vowel, string> = {\n  A: \"#EF4444\",\n  E: \"#F59E0B\",\n  I: \"#EAB308\",\n  O: \"#10B981\",\n  U: \"#3B82F6\",\n  Y: \"#6366F1\",\n  \"Ë\": \"#8B5CF6\",\n};\nconst PALETTE = { rail:\"#1f2937\", accent:\"#FFB300\", text:\"#111827\", muted:\"#6b7280\", bg:\"#f9fafb\" };\n\n// --- Consonant classes (from solver) ---\ntype CClass = \"Plosive\" | \"Affricate\" | \"SibilantFricative\" | \"NonSibilantFricative\" | \"Nasal\" | \"Liquid\" | \"Glide\";\n\nconst CLASS_ORDER: CClass[] = [\"Plosive\", \"Affricate\", \"SibilantFricative\", \"NonSibilantFricative\", \"Nasal\", \"Liquid\", \"Glide\"];\n\nconst DIGRAPH_CLASS: Record<string, CClass> = {\n  \"ch\": \"Affricate\", \"dz\": \"Affricate\", \"ts\": \"Affricate\", \"dʒ\": \"Affricate\", \"tʃ\": \"Affricate\",\n  \"sh\": \"SibilantFricative\", \"zh\": \"SibilantFricative\",\n  \"th\": \"NonSibilantFricative\", \"ph\": \"NonSibilantFricative\",\n  \"gj\": \"Affricate\", \"nj\":\"Nasal\", \"ll\":\"Liquid\", \"rr\":\"Liquid\",\n};\n\nconst LETTER_CLASS: Record<string, CClass> = {\n  p:\"Plosive\", b:\"Plosive\", t:\"Plosive\", d:\"Plosive\", k:\"Plosive\", g:\"Plosive\", q:\"Plosive\", c:\"Plosive\",\n  f:\"NonSibilantFricative\", v:\"NonSibilantFricative\", h:\"NonSibilantFricative\",\n  s:\"SibilantFricative\", z:\"SibilantFricative\", x:\"SibilantFricative\",\n  j:\"Affricate\",\n  m:\"Nasal\", n:\"Nasal\",\n  l:\"Liquid\", r:\"Liquid\",\n  w:\"Glide\", y:\"Glide\",\n};\n\nconst VOWEL_SET = new Set([\"a\",\"e\",\"i\",\"o\",\"u\",\"y\",\"ë\"]);\n\nfunction extractConsonants(word: string): { ch: string; klass: CClass }[] {\n  const s = word.normalize(\"NFC\").toLowerCase();\n  const out: { ch: string; klass: CClass }[] = [];\n\n  let i = 0;\n  while (i < s.length) {\n    if (VOWEL_SET.has(s[i])) { i++; continue; }\n\n    // Check for digraphs first\n    let foundDigraph = false;\n    if (i < s.length - 1) {\n      const dg = s.slice(i, i + 2);\n      if (DIGRAPH_CLASS[dg]) {\n        out.push({ ch: dg, klass: DIGRAPH_CLASS[dg] });\n        i += 2;\n        foundDigraph = true;\n      }\n    }\n\n    if (!foundDigraph) {\n      const ch = s[i];\n      const klass = LETTER_CLASS[ch] ?? \"NonSibilantFricative\";\n      out.push({ ch, klass });\n      i++;\n    }\n  }\n  return out;\n}\n\n\nexport function TwoRailsWithConsonants({\n  word,\n  path,\n  running,\n  playKey,\n  height = 320,\n  durationPerHopMs = 900,\n  showLabels = true,\n  consonants,              // optional override sequence (e.g., [{ch:\"s\",klass:\"Fricative\"}...])\n}: {\n  word: string;\n  path: Vowel[];           // e.g., [\"U\",\"I\"]\n  running: boolean;\n  playKey?: string;\n  height?: number;\n  durationPerHopMs?: number;\n  showLabels?: boolean;\n  consonants?: { ch: string; klass: CClass }[];\n}) {\n  // Layout\n  const W = 680;\n  const H = height;\n  const padX = 110;\n  const leftX = padX, rightX = W - padX;\n  const top = 18, bottom = H - 40;\n  const railH = bottom - top;\n  const stepGap = railH / (ORDER.length - 1);\n  const yFor = (v: Vowel) => top + ORDER.indexOf(v) * stepGap;\n\n  // Mid-rail band\n  const midY = (top + bottom) / 2;\n  const bandH = 36;\n\n  // Scanners while running\n  const [scanT, setScanT] = React.useState(0);\n  React.useEffect(() => {\n    if (!running) return;\n    let raf = 0; const t0 = performance.now();\n    const loop = (t: number) => { setScanT((t - t0)/1000); raf = requestAnimationFrame(loop); };\n    raf = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(raf);\n  }, [running]);\n\n  // Hop state\n  const [idx, setIdx] = React.useState(0);\n  const [pos, setPos] = React.useState<{x:number;y:number}|null>(null);\n  const [trail, setTrail] = React.useState<{x:number;y:number}[]>([]);\n  React.useEffect(() => { setIdx(0); setPos(null); setTrail([]); }, [playKey]);\n\n  // Consonant pulses\n  const consSeq = React.useMemo(() => consonants ?? extractConsonants(word), [word, consonants]);\n\n  // Distribute consonants across hops (even fallback)\n  const hops = Math.max(1, path.length - 1);\n  const bucketed: {ch:string;klass:CClass}[][] = Array.from({length:hops}, ()=>[]);\n  for (let i=0;i<consSeq.length;i++){\n    bucketed[i % hops].push(consSeq[i]);\n  }\n\n  const [activePulse, setActivePulse] = React.useState<{ klass: CClass; t: number } | null>(null);\n\n  React.useEffect(() => {\n    if (running || path.length < 2) return;\n    let stop = false;\n\n    const runHop = async (i: number) => {\n      if (stop) return;\n      if (i >= path.length - 1) return;\n\n      const leftToRight = i % 2 === 0;\n      const startX = leftToRight ? leftX : rightX;\n      const endX   = leftToRight ? rightX : leftX;\n      const startY = yFor(path[i]);\n      const endY   = yFor(path[i+1]);\n      const ctrlX  = (leftX + rightX) / 2;\n      const bow    = 48 * (endY < startY ? -1 : 1);\n      const ctrlY  = (startY + endY) / 2 + bow;\n\n      const steps = 50;\n      const dt = durationPerHopMs / steps;\n\n      // schedule consonant pulses evenly along this hop\n      const cons = bucketed[i];\n      const thresholds = cons.map((_,k)=> (k+1)/(cons.length+1));\n\n      for (let s=0; s<=steps; s++){\n        await new Promise(r=>setTimeout(r, dt));\n        if (stop) return;\n\n        const t = s/steps;\n        const x12 = startX + (ctrlX - startX) * t;\n        const y12 = startY + (ctrlY - startY) * t;\n        const x23 = ctrlX + (endX - ctrlX) * t;\n        const y23 = ctrlY + (endY - ctrlY) * t;\n        const x = x12 + (x23 - x12) * t;\n        const y = y12 + (y23 - y12) * t;\n\n        setPos({x,y});\n        setTrail(tr => [...tr.slice(-80), {x,y}]);\n\n        // trigger pulses\n        for (let p=0; p<thresholds.length; p++){\n          if (Math.abs(t - thresholds[p]) < 0.02){\n            const ev = cons[p];\n            if (ev) { setActivePulse({ klass: ev.klass, t: performance.now() }); }\n          }\n        }\n      }\n      setIdx(k => k+1);\n      await runHop(i+1);\n    };\n\n    runHop(0);\n    return () => { stop = true; };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [running, path, durationPerHopMs, leftX, rightX, word]);\n\n  // Scanner bars\n  const scanY1 = top + (Math.sin(scanT * 2.2) * 0.5 + 0.5) * railH;\n  const scanY2 = top + (Math.cos(scanT * 2.8) * 0.5 + 0.5) * railH;\n\n  // Render helpers\n  const Rail = ({ x }: { x: number }) => (\n    <g>\n      <line x1={x} y1={top-6} x2={x} y2={bottom+6} stroke={PALETTE.rail} strokeOpacity={0.35} strokeWidth={2}/>\n      {ORDER.map(v=>(\n        <g key={`${x}-${v}`}>\n          <circle cx={x} cy={yFor(v)} r={10} fill=\"#fff\" stroke={PALETTE.rail} strokeOpacity={0.25}/>\n          {showLabels && (\n            <text x={x + (x===leftX ? -24 : 24)} y={yFor(v)+4} fontSize={12}\n              textAnchor={x===leftX ? \"end\":\"start\"} fill={VOICE_COLOR[v]}>{v}</text>\n          )}\n        </g>\n      ))}\n    </g>\n  );\n\n  const MidRail = () => {\n    const segW = 54, gap = 3;\n    const totalW = CLASS_ORDER.length*segW + (CLASS_ORDER.length-1)*gap;\n    const startX = (W - totalW)/2;\n\n    return (\n      <g>\n        {CLASS_ORDER.map((klass, i) => {\n          const x = startX + i*(segW+gap);\n          const active = activePulse?.klass === klass;\n          const shortName = klass.replace(\"SibilantFricative\", \"Sibilant\").replace(\"NonSibilantFricative\", \"Fricative\");\n          return (\n            <g key={klass}>\n              <rect x={x} y={midY - bandH/2} width={segW} height={bandH}\n                rx={8} ry={8}\n                fill={active ? PALETTE.accent : \"#f3f4f6\"}\n                fillOpacity={active ? 0.9 : 0.6}\n                stroke=\"#d1d5db\" strokeOpacity={0.6} />\n              <text x={x+segW/2} y={midY} textAnchor=\"middle\" fontSize={10}\n                fill={active ? \"#111827\" : PALETTE.muted} dominantBaseline=\"central\">\n                {shortName}\n              </text>\n              {/* pulse ring */}\n              {active && (\n                <motion.circle cx={x+segW/2} cy={midY} r={bandH/2+6} fill=\"none\"\n                  stroke={PALETTE.accent} strokeOpacity={0.6} strokeWidth={2}/>\n              )}\n            </g>\n          );\n        })}\n      </g>\n    );\n  };\n\n  return (\n    <div className=\"w-full rounded-2xl border\" style={{ background: PALETTE.bg }}>\n      <svg width={W} height={H} style={{ display: \"block\" }}>\n        <text x={W/2} y={16} textAnchor=\"middle\" fontSize={14} fill={PALETTE.text}>{word}</text>\n\n        {/* rails */}\n        <Rail x={leftX} />\n        <Rail x={rightX} />\n\n        {/* mid consonant strip */}\n        <MidRail />\n\n        {/* running scanners */}\n        <AnimatePresence>\n          {running && (\n            <g>\n              <motion.line x1={leftX-18} x2={leftX+18} y1={scanY1} y2={scanY1}\n                stroke={PALETTE.accent} strokeWidth={3}\n                initial={{opacity:0}} animate={{opacity:0.9}} exit={{opacity:0}}/>\n              <motion.line x1={rightX-18} x2={rightX+18} y1={scanY2} y2={scanY2}\n                stroke={PALETTE.accent} strokeWidth={3}\n                initial={{opacity:0}} animate={{opacity:0.9}} exit={{opacity:0}}/>\n              {Math.abs(scanY1 - scanY2) < 8 && (\n                <motion.circle\n                  cx={(leftX + rightX) / 2} cy={(scanY1 + scanY2) / 2} r={8}\n                  fill=\"none\" stroke={PALETTE.accent} strokeWidth={2}\n                  initial={{ opacity: 0.6, r: 4 }} animate={{ r: 14, opacity: 0 }} transition={{ duration: 0.6 }}\n                />\n              )}\n            </g>\n          )}\n        </AnimatePresence>\n\n        {/* trail */}\n        {trail.length>1 && (\n          <polyline\n            points={trail.map(p=>`${p.x},${p.y}`).join(\" \")}\n            fill=\"none\" stroke={PALETTE.accent} strokeWidth={5}\n            strokeLinejoin=\"round\" strokeLinecap=\"round\"\n            style={{ filter: \"drop-shadow(0 0 6px rgba(255,179,0,0.55))\" }}\n          />\n        )}\n\n        {/* token */}\n        <AnimatePresence>\n          {pos && (\n            <motion.circle key={`${pos.x}-${pos.y}`} cx={pos.x} cy={pos.y} r={11}\n              fill={VOICE_COLOR[path[Math.min(idx, path.length-1)] ] || \"#3F51B5\"}\n              stroke=\"#fff\" strokeOpacity={0.7}\n              initial={{ scale: 0.7, opacity: 0 }} animate={{ scale: 1, opacity: 1 }}\n              transition={{ type:\"spring\", stiffness:140, damping:18 }}\n            />\n          )}\n        </AnimatePresence>\n\n        {/* step hints */}\n        {!running && path.length>=2 && (\n          <g>\n            <circle cx={idx%2===0?leftX:rightX} cy={yFor(path[Math.min(idx, path.length-1)])} r={6}\n              fill={VOICE_COLOR[path[Math.min(idx, path.length-1)]]}/>\n            {idx < path.length-1 && (\n              <circle cx={idx%2===0?rightX:leftX} cy={yFor(path[idx+1])} r={6}\n                fill={VOICE_COLOR[path[idx+1]]} fillOpacity={0.6}/>\n            )}\n          </g>\n        )}\n\n        {/* footer */}\n        {!running && path.length>0 && (\n          <text x={W/2} y={H-10} textAnchor=\"middle\" fontSize={12} fill={PALETTE.muted}>\n            {path.join(\" → \")}\n          </text>\n        )}\n      </svg>\n    </div>\n  );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2651, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["// src/lib/firebase.ts\nimport { initializeApp, getApps, type FirebaseApp } from \"firebase/app\";\nimport { getFirestore, type Firestore } from \"firebase/firestore\";\nimport { getAuth, signInAnonymously, onAuthStateChanged, type User, type Auth } from \"firebase/auth\";\n\nconst isTest = process.env.NODE_ENV === 'test';\n\n// Use the server-side key for scripts/server-side, fall back to public key for client\nconst apiKey = process.env.FIREBASE_SERVER_API_KEY || process.env.NEXT_PUBLIC_FB_API_KEY;\n\nconst firebaseConfig = {\n  apiKey: apiKey,\n  authDomain: process.env.NEXT_PUBLIC_FB_AUTH_DOMAIN!,\n  projectId: process.env.NEXT_PUBLIC_FB_PROJECT_ID!,\n  storageBucket: process.env.NEXT_PUBLIC_FB_STORAGE_BUCKET!,\n  messagingSenderId: process.env.NEXT_PUBLIC_FB_MESSAGING_SENDER_ID!,\n  appId: process.env.NEXT_PUBLIC_FB_APP_ID!,\n};\n\n// Only initialize if the key is present\nconst appInitialized = !!apiKey;\n\nexport const app: FirebaseApp | null = isTest || !appInitialized\n  ? null\n  : (getApps().length ? getApps()[0] : initializeApp(firebaseConfig));\n\nexport const db: Firestore | null = app ? getFirestore(app) : null;\nexport const auth: Auth | null = app ? getAuth(app) : null;\n\n\n// Store the promise to avoid multiple simultaneous calls\nlet authPromise: Promise<User> | null = null;\n\nexport function ensureAnon(): Promise<User> {\n  if (isTest) return Promise.resolve({ uid: 'test-uid' } as any);\n  if (!app || !auth) {\n    console.warn(\"Firebase not initialized, cannot ensure anonymous user.\");\n    return Promise.resolve({ uid: 'uninitialized' } as any);\n  }\n\n  const existing = auth.currentUser;\n  if (existing) return Promise.resolve(existing);\n\n  if (authPromise) return authPromise;\n\n  authPromise = new Promise((resolve, reject) => {\n    // Check again inside the promise in case auth state changed while promise was created\n    if (auth.currentUser) {\n      resolve(auth.currentUser);\n      authPromise = null;\n      return;\n    }\n\n    const off = onAuthStateChanged(auth, (u) => {\n        if (u) {\n            off();\n            resolve(u);\n            authPromise = null;\n        }\n    }, (err) => {\n        off();\n        reject(err);\n        authPromise = null;\n    });\n\n    signInAnonymously(auth).catch(err => {\n      // The onAuthStateChanged error handler should catch this,\n      // but we reject here as a fallback.\n      reject(err);\n      authPromise = null;\n    });\n  });\n\n  return authPromise;\n}\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;;AACtB;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;;;;AAEA,MAAM,SAAS,oDAAyB;AAExC,sFAAsF;AACtF,MAAM,SAAS,QAAQ,GAAG,CAAC,uBAAuB,IAAI,QAAQ,GAAG,CAAC,sBAAsB;AAExF,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY,QAAQ,GAAG,CAAC,0BAA0B;IAClD,WAAW,QAAQ,GAAG,CAAC,yBAAyB;IAChD,eAAe,QAAQ,GAAG,CAAC,6BAA6B;IACxD,mBAAmB,QAAQ,GAAG,CAAC,kCAAkC;IACjE,OAAO,QAAQ,GAAG,CAAC,qBAAqB;AAC1C;AAEA,wCAAwC;AACxC,MAAM,iBAAiB,CAAC,CAAC;AAElB,MAAM,MAA0B,UAAU,CAAC,iBAC9C,OACC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE,GAAG,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAE9C,MAAM,KAAuB,MAAM,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE,OAAO;AACvD,MAAM,OAAoB,MAAM,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE,OAAO;AAGtD,yDAAyD;AACzD,IAAI,cAAoC;AAEjC,SAAS;IACd,uCAAY;;IAAkD;IAC9D,IAAI,CAAC,OAAO,CAAC,MAAM;QACjB,QAAQ,IAAI,CAAC;QACb,OAAO,QAAQ,OAAO,CAAC;YAAE,KAAK;QAAgB;IAChD;IAEA,MAAM,WAAW,KAAK,WAAW;IACjC,IAAI,UAAU,OAAO,QAAQ,OAAO,CAAC;IAErC,IAAI,aAAa,OAAO;IAExB,cAAc,IAAI,QAAQ,CAAC,SAAS;QAClC,sFAAsF;QACtF,IAAI,KAAK,WAAW,EAAE;YACpB,QAAQ,KAAK,WAAW;YACxB,cAAc;YACd;QACF;QAEA,MAAM,MAAM,CAAA,GAAA,oPAAA,CAAA,qBAAkB,AAAD,EAAE,MAAM,CAAC;YAClC,IAAI,GAAG;gBACH;gBACA,QAAQ;gBACR,cAAc;YAClB;QACJ,GAAG,CAAC;YACA;YACA,OAAO;YACP,cAAc;QAClB;QAEA,CAAA,GAAA,oPAAA,CAAA,oBAAiB,AAAD,EAAE,MAAM,KAAK,CAAC,CAAA;YAC5B,0DAA0D;YAC1D,oCAAoC;YACpC,OAAO;YACP,cAAc;QAChB;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 2733, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/shared/engineShape.ts"],"sourcesContent":["\n// Canonical shape your UI will use everywhere.\nexport type Vowel = 'A'|'E'|'I'|'O'|'U'|'Y'|'Ë';\n\nexport type EnginePath = {\n  voicePath: Vowel[];\n  ringPath: number[];\n  levelPath: number[];\n  ops: string[];\n  checksums: { V: number; E: number; C: number };\n  kept: number;\n};\n\nexport type LanguageFamily = {\n    familyId: string;\n    label: string;\n    confidence: number;\n    rationale: string;\n    forms: any[];\n    signals: string[];\n    dialect?: 'geg' | 'tosk';\n};\n\n// This is what the app & JSON export will see.\nexport type EnginePayload = {\n  engineVersion: string;\n  word: string;\n  mode: 'strict'|'open';\n  alphabet: string;\n  primaryPath: EnginePath;\n  frontierPaths: EnginePath[];\n  windows: string[];\n  windowClasses: string[];\n  signals: string[];\n  solveMs?: number;\n  cacheHit?: boolean;\n  recomputed?: boolean;\n  languageFamilies?: LanguageFamily[];\n  edgeWindows?: string[];\n};\n\n\n// A placeholder normalizer. In a real scenario, this would be a robust\n// function that validates and transforms raw API output into the strict\n// AnalysisResult shape. For now, it's a simple type assertion.\nexport function normalizeEnginePayload(raw: any): EnginePayload {\n  if (!raw || !raw.word || !raw.primaryPath) {\n    console.error(\"Invalid payload for normalization:\", raw);\n    throw new Error(\"Normalization failed: payload is missing required fields.\");\n  }\n  \n  const payload: EnginePayload = {\n    engineVersion: raw.engineVersion ?? 'unknown',\n    word: raw.word,\n    mode: raw.mode ?? 'strict',\n    alphabet: raw.alphabet ?? 'auto',\n    primaryPath: {\n      voicePath: raw.primaryPath.voicePath ?? [],\n      ringPath: raw.primaryPath.ringPath ?? [],\n      levelPath: raw.primaryPath.levelPath ?? [],\n      ops: raw.primaryPath.ops ?? [],\n      checksums: raw.primaryPath.checksums ?? { V:0, E:0, C:0 },\n      kept: raw.primaryPath.kept ?? 0,\n    },\n    frontierPaths: raw.frontierPaths ?? [],\n    windows: raw.windows ?? [],\n    windowClasses: raw.windowClasses ?? [],\n    signals: raw.signals ?? [],\n    solveMs: raw.solveMs,\n    cacheHit: raw.cacheHit,\n    recomputed: raw.recomputed,\n    languageFamilies: raw.languageFamilies ?? [],\n    edgeWindows: raw.edgeWindows ?? [],\n  };\n\n  return payload;\n}\n"],"names":[],"mappings":"AACA,+CAA+C;;;;AA4CxC,SAAS,uBAAuB,GAAQ;IAC7C,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,WAAW,EAAE;QACzC,QAAQ,KAAK,CAAC,sCAAsC;QACpD,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,UAAyB;QAC7B,eAAe,IAAI,aAAa,IAAI;QACpC,MAAM,IAAI,IAAI;QACd,MAAM,IAAI,IAAI,IAAI;QAClB,UAAU,IAAI,QAAQ,IAAI;QAC1B,aAAa;YACX,WAAW,IAAI,WAAW,CAAC,SAAS,IAAI,EAAE;YAC1C,UAAU,IAAI,WAAW,CAAC,QAAQ,IAAI,EAAE;YACxC,WAAW,IAAI,WAAW,CAAC,SAAS,IAAI,EAAE;YAC1C,KAAK,IAAI,WAAW,CAAC,GAAG,IAAI,EAAE;YAC9B,WAAW,IAAI,WAAW,CAAC,SAAS,IAAI;gBAAE,GAAE;gBAAG,GAAE;gBAAG,GAAE;YAAE;YACxD,MAAM,IAAI,WAAW,CAAC,IAAI,IAAI;QAChC;QACA,eAAe,IAAI,aAAa,IAAI,EAAE;QACtC,SAAS,IAAI,OAAO,IAAI,EAAE;QAC1B,eAAe,IAAI,aAAa,IAAI,EAAE;QACtC,SAAS,IAAI,OAAO,IAAI,EAAE;QAC1B,SAAS,IAAI,OAAO;QACpB,UAAU,IAAI,QAAQ;QACtB,YAAY,IAAI,UAAU;QAC1B,kBAAkB,IAAI,gBAAgB,IAAI,EAAE;QAC5C,aAAa,IAAI,WAAW,IAAI,EAAE;IACpC;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 2777, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/logError.ts"],"sourcesContent":["import { getFirestore, collection, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { getAuth } from \"firebase/auth\";\nimport { app, auth, db } from \"./firebase\";\n\nexport async function logError(ev: { where: string; message: string; detail?: any }) {\n  try {\n    if (!db || !auth) return; // Do not log if firebase is not initialized\n    const uid = (auth.currentUser && auth.currentUser.uid) || \"anon\";\n    const ref = collection(db, \"users\", uid, \"errors\");\n    await addDoc(ref, {\n      where: ev.where,\n      message: ev.message?.toString().slice(0, 500),\n      detail: ev.detail ? JSON.stringify(ev.detail).slice(0, 2000) : null,\n      ts: serverTimestamp(),\n      engine: process.env.NEXT_PUBLIC_ENGINE_VERSION || \"dev\"\n    });\n  } catch {\n    // swallow errors, especially in test env\n  }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AAEA;;;AAEO,eAAe,SAAS,EAAoD;IACjF,IAAI;QACF,IAAI,CAAC,sHAAA,CAAA,KAAE,IAAI,CAAC,sHAAA,CAAA,OAAI,EAAE,QAAQ,4CAA4C;QACtE,MAAM,MAAM,AAAC,sHAAA,CAAA,OAAI,CAAC,WAAW,IAAI,sHAAA,CAAA,OAAI,CAAC,WAAW,CAAC,GAAG,IAAK;QAC1D,MAAM,MAAM,CAAA,GAAA,iKAAA,CAAA,aAAU,AAAD,EAAE,sHAAA,CAAA,KAAE,EAAE,SAAS,KAAK;QACzC,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,KAAK;YAChB,OAAO,GAAG,KAAK;YACf,SAAS,GAAG,OAAO,EAAE,WAAW,MAAM,GAAG;YACzC,QAAQ,GAAG,MAAM,GAAG,KAAK,SAAS,CAAC,GAAG,MAAM,EAAE,KAAK,CAAC,GAAG,QAAQ;YAC/D,IAAI,CAAA,GAAA,iKAAA,CAAA,kBAAe,AAAD;YAClB,QAAQ,QAAQ,GAAG,CAAC,0BAA0B,IAAI;QACpD;IACF,EAAE,OAAM;IACN,yCAAyC;IAC3C;AACF","debugId":null}},
    {"offset": {"line": 2807, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/engine/manifest.ts"],"sourcesContent":["\n// src/engine/manifest.ts\nexport type V = \"A\"|\"E\"|\"I\"|\"O\"|\"U\"|\"Y\"|\"Ë\";\n\nexport type EngineManifest = {\n  name: string;\n  version: string;\n  ringIndex: Record<V, 0|1|2|3>;   // O=0; I/U=1; E/Y=2; A/Ë=3\n  levelIndex: Record<V, -1|0|1>;   // high=+1 (A,E,I), mid=0 (O), low=-1 (U,Y,Ë)\n  opCost: { sub:number; del:number; ins:number };\n  edgeWeight: number;\n  consonant: {\n    classes: Record<string, {\n      examples: string[];\n      preferredDelta: [number,number];\n      align: V;\n    }>;\n    inventory: string[];\n  };\n};\n\nexport const manifest_v1: EngineManifest = {\n  name: \"SevenVoices Core\",\n  version: \"2025-11-16-core-2\",\n  ringIndex: { O:0, I:1, U:1, E:2, Y:2, A:3, \"Ë\":3 },\n  levelIndex: { A:1, E:1, I:1, O:0, U:-1, Y:-1, \"Ë\":-1 },\n  opCost: { sub:1, del:4, ins:3 },\n  edgeWeight: 0.25,\n  consonant: {\n    classes: {\n      Plosive:   { examples:[\"p\",\"b\",\"t\",\"d\",\"k\",\"g\",\"q\",\"c\",\"ck\",\"gj\"], preferredDelta:[2,3], align:\"A\" },\n      Affricate: { examples:[\"ch\",\"j\",\"dz\",\"ts\",\"dʒ\",\"tʃ\",\"ç\",\"xh\"],     preferredDelta:[1,2], align:\"I\" },\n      SibilantFricative: { examples:[\"s\",\"z\",\"sh\",\"zh\",\"x\"],             preferredDelta:[1,2], align:\"Y\" },\n      NonSibilantFricative: { examples:[\"f\",\"v\",\"h\",\"th\",\"ph\",\"dh\"],     preferredDelta:[1,1], align:\"E\" },\n      Nasal:     { examples:[\"m\",\"n\",\"nj\"],                              preferredDelta:[0,1], align:\"Ë\" },\n      Liquid:    { examples:[\"l\",\"r\",\"ll\",\"rr\"],                         preferredDelta:[0,1], align:\"O\" },\n      Glide:     { examples:[\"w\",\"y\"],                                   preferredDelta:[0,1], align:\"U\" },\n    },\n    inventory: [\n      \"p\",\"b\",\"t\",\"d\",\"k\",\"g\",\"q\",\"c\",\"ck\",\"gj\",\"ch\",\"j\",\"dz\",\"ts\",\"dʒ\",\"tʃ\",\"ç\",\"xh\",\n      \"s\",\"z\",\"sh\",\"zh\",\"x\",\"f\",\"v\",\"h\",\"th\",\"ph\",\"dh\",\"m\",\"n\",\"nj\",\"l\",\"r\",\"ll\",\"rr\",\"w\",\"y\"\n    ]\n  }\n};\n\nexport const manifest_v2: EngineManifest = {\n    ...manifest_v1,\n    version: \"2025-11-16-core-1\",\n    edgeWeight: 0.35,\n    opCost: { sub:1, del:4, ins:3 },\n};\n\n\n// Default is now v1 with the tuned params\nexport const defaultManifest = manifest_v1;\n\n// Simple registry if you add future manifests\nconst registry: Record<string, EngineManifest> = {\n  [manifest_v1.version]: manifest_v1,\n  [manifest_v2.version]: manifest_v2,\n};\n\nexport function getManifest(version?: string) {\n  if (!version) return defaultManifest;\n  return registry[version] ?? defaultManifest;\n}\n"],"names":[],"mappings":"AACA,yBAAyB;;;;;;;AAoBlB,MAAM,cAA8B;IACzC,MAAM;IACN,SAAS;IACT,WAAW;QAAE,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,KAAI;IAAE;IACjD,YAAY;QAAE,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,GAAE;QAAG,GAAE,CAAC;QAAG,GAAE,CAAC;QAAG,KAAI,CAAC;IAAE;IACrD,QAAQ;QAAE,KAAI;QAAG,KAAI;QAAG,KAAI;IAAE;IAC9B,YAAY;IACZ,WAAW;QACT,SAAS;YACP,SAAW;gBAAE,UAAS;oBAAC;oBAAI;oBAAI;oBAAI;oBAAI;oBAAI;oBAAI;oBAAI;oBAAI;oBAAK;iBAAK;gBAAE,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,WAAW;gBAAE,UAAS;oBAAC;oBAAK;oBAAI;oBAAK;oBAAK;oBAAK;oBAAK;oBAAI;iBAAK;gBAAM,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,mBAAmB;gBAAE,UAAS;oBAAC;oBAAI;oBAAI;oBAAK;oBAAK;iBAAI;gBAAc,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,sBAAsB;gBAAE,UAAS;oBAAC;oBAAI;oBAAI;oBAAI;oBAAK;oBAAK;iBAAK;gBAAM,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,OAAW;gBAAE,UAAS;oBAAC;oBAAI;oBAAI;iBAAK;gBAA+B,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,QAAW;gBAAE,UAAS;oBAAC;oBAAI;oBAAI;oBAAK;iBAAK;gBAA0B,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;YACnG,OAAW;gBAAE,UAAS;oBAAC;oBAAI;iBAAI;gBAAoC,gBAAe;oBAAC;oBAAE;iBAAE;gBAAE,OAAM;YAAI;QACrG;QACA,WAAW;YACT;YAAI;YAAI;YAAI;YAAI;YAAI;YAAI;YAAI;YAAI;YAAK;YAAK;YAAK;YAAI;YAAK;YAAK;YAAK;YAAK;YAAI;YAC3E;YAAI;YAAI;YAAK;YAAK;YAAI;YAAI;YAAI;YAAI;YAAK;YAAK;YAAK;YAAI;YAAI;YAAK;YAAI;YAAI;YAAK;YAAK;YAAI;SACrF;IACH;AACF;AAEO,MAAM,cAA8B;IACvC,GAAG,WAAW;IACd,SAAS;IACT,YAAY;IACZ,QAAQ;QAAE,KAAI;QAAG,KAAI;QAAG,KAAI;IAAE;AAClC;AAIO,MAAM,kBAAkB;AAE/B,8CAA8C;AAC9C,MAAM,WAA2C;IAC/C,CAAC,YAAY,OAAO,CAAC,EAAE;IACvB,CAAC,YAAY,OAAO,CAAC,EAAE;AACzB;AAEO,SAAS,YAAY,OAAgB;IAC1C,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,QAAQ,CAAC,QAAQ,IAAI;AAC9B","debugId":null}},
    {"offset": {"line": 3013, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/functions/sevenVoicesC.ts"],"sourcesContent":["\n\nimport { VOWELS } from \"./sevenVoicesCore\";\nimport type { Vowel } from \"./sevenVoicesCore\";\nimport { chooseProfile, classRange } from \"./languages\";\nimport type { LangProfile, CClass } from \"./languages\";\nimport { getManifest } from \"../engine/manifest\";\n\nexport function toVowel(ch: string): Vowel | null {\n  const u = ch.toUpperCase();\n  return u === \"Ë\" ? \"Ë\" : VOWELS.includes(u as any) ? (u as Vowel) : null;\n}\n\nexport function isVowelChar(ch: string) {\n  return /[AEIOUYËaeiouyë]/.test(ch);\n}\n\nexport function extractBase(word: string): Vowel[] {\n  const out: Vowel[] = [];\n  const s = word.normalize(\"NFC\").toLowerCase();\n  for (let i = 0; i < s.length; i++) {\n    if (!isVowelChar(s[i])) continue;\n\n    // special case for 'ie' -> I\n    if (i < s.length - 1 && s[i] === \"i\" && s[i + 1] === \"e\") {\n      if (out.length === 0 || out[out.length - 1] !== \"I\") {\n        out.push(\"I\");\n      }\n      i++; // skip 'e'\n      continue;\n    }\n\n    const v = toVowel(s[i])!;\n    if (out.length && out[out.length - 1] === v) continue; // collapseDupes\n    out.push(v);\n  }\n  return out;\n}\n\nexport function normalizeTerminalY(seq: Vowel[], rawWord: string): Vowel[] {\n  if (\n    seq.length &&\n    seq[seq.length - 1] === \"Y\" &&\n    rawWord.toLowerCase().endsWith(\"y\")\n  ) {\n    const out = seq.slice();\n    out[out.length - 1] = \"I\";\n    return out;\n  }\n  return seq;\n}\n\n\nexport function computeC(voicePath: Vowel[], consClasses: CClass[], RING: Record<Vowel, number>): number {\n  let c = 0;\n  const hops = Math.max(0, voicePath.length - 1);\n  for (let i = 0; i < hops; i++) {\n    const cls = i < consClasses.length ? consClasses[i] : \"Glide\";\n    const d = Math.abs(RING[voicePath[i + 1]] - RING[voicePath[i]]);\n    const [lo, hi] = classRange(cls);\n    if (d < lo) c += lo - d;\n    else if (d > hi) c += d - hi;\n  }\n  return c;\n}\n\n/**\n * Extract the raw substrings between the normalized base vowels.\n * Pure read: does NOT mutate state, does NOT depend on scoring.\n */\nfunction extractWindows(word: string, baseSeq: Vowel[]): string[] {\n  const s = word.normalize(\"NFC\");\n  // find indices of base vowels in raw string (first match per base slot)\n  const pos: number[] = [];\n  let vi = 0;\n  for (let i = 0; i < s.length && vi < baseSeq.length; i++) {\n    const v = toVowel(s[i]);\n    if (!v) continue;\n    if (v === baseSeq[vi]) {\n      pos.push(i);\n      vi++;\n    }\n  }\n\n  const windows: string[] = [];\n  for (let k = 0; k < pos.length - 1; k++) {\n    windows.push(s.slice(pos[k] + 1, pos[k + 1]));\n  }\n  return windows;\n}\n\nfunction classifyWindow(chars: string, P: LangProfile): CClass {\n  let s = chars.toLowerCase();\n  if (P.pre) s = P.pre(s);\n\n  for (let i = 0; i < s.length - 1; i++) {\n    const dg = s.slice(i, i + 2);\n    if (P.DIGRAPH[dg as keyof typeof P.DIGRAPH])\n      return P.DIGRAPH[dg as keyof typeof P.DIGRAPH];\n  }\n  for (const ch of s) {\n    if (/[aeiouyë]/i.test(ch)) continue;\n    if (P.LETTER[ch as keyof typeof P.LETTER])\n      return P.LETTER[ch as keyof typeof P.LETTER];\n  }\n  return \"NonSibilantFricative\";\n}\n\n\n/**\n * Optional debug export (handy for UI): returns both windows and classes.\n */\nexport function readWindowsDebug(\n  word: string,\n  baseSeq: Vowel[],\n  profile: LangProfile\n): { windows: string[]; classes: CClass[]; edge: EdgeInfo, edgeWindows: string[] } {\n  const windows = extractWindows(word, baseSeq);\n  const classes = windows.map((w) => classifyWindow(w, profile));\n  \n  const edge = readEdgeWindows(word, profile);\n  const edgeWindows: string[] = [];\n  if (edge.prefix?.cls) edgeWindows.push(`prefix '${edge.prefix.raw}' → ${edge.prefix.cls}`);\n  if (edge.suffix?.cls) edgeWindows.push(`suffix '${edge.suffix.raw}' → ${edge.suffix.cls}`);\n\n  return { windows, classes, edge, edgeWindows };\n}\n\n\n// --- Edge windows (prefix/suffix) support ---\n\nexport type EdgeInfo = {\n  prefix?: { raw: string; cls: string | null };\n  suffix?: { raw: string; cls: string | null };\n};\n\nfunction takePrefixCluster(word: string): string {\n  let i = 0;\n  while (i < word.length && !isVowelChar(word[i])) i++;\n  return word.slice(0, i);\n}\n\nfunction takeSuffixCluster(word: string): string {\n  let i = word.length - 1;\n  while (i >= 0 && !isVowelChar(word[i])) i--;\n  return word.slice(i + 1);\n}\n\n// If you already have a classifier, reuse it. Otherwise, a simple fallback mapper:\nfunction classifyClusterByProfile(cluster: string, profile: LangProfile): CClass | null {\n  if (!cluster) return null;\n\n  // Fallback: rough class map (keep consistent with your main table)\n  const c = cluster.toLowerCase();\n  const hit = (list: string[]) => list.some(x => c.includes(x));\n\n  if (hit([\"p\",\"b\",\"t\",\"d\",\"k\",\"g\",\"q\",\"c\",\"ck\",\"gj\"])) return \"Plosive\";\n  if (hit([\"ch\",\"j\",\"dz\",\"ts\",\"dʒ\",\"tʃ\",\"ç\",\"xh\"]))     return \"Affricate\";\n  if (hit([\"s\",\"z\",\"sh\",\"zh\",\"x\"]))                      return \"SibilantFricative\";\n  if (hit([\"f\",\"v\",\"h\",\"th\",\"ph\",\"dh\"]))                 return \"NonSibilantFricative\";\n  if (hit([\"m\",\"n\",\"nj\"]))                                return \"Nasal\";\n  if (hit([\"ll\",\"rr\",\"l\",\"r\"]))                           return \"Liquid\";\n  if (hit([\"w\",\"y\"]))                                     return \"Glide\";\n  return \"NonSibilantFricative\";\n}\n\nconst manifest = getManifest();\nconst CLASS_DELTA_PREF: Record<string, [number, number]> = Object.entries(manifest.consonant.classes).reduce((acc, [key, val]) => {\n  acc[key] = val.preferredDelta;\n  return acc;\n}, {} as Record<string, [number, number]>);\n\n\nexport function readEdgeWindows(word: string, profile: LangProfile): EdgeInfo {\n  const prefixRaw = takePrefixCluster(word);\n  const suffixRaw = takeSuffixCluster(word);\n  const prefixCls = classifyClusterByProfile(prefixRaw, profile);\n  const suffixCls = classifyClusterByProfile(suffixRaw, profile);\n  return {\n    prefix: prefixRaw ? { raw: prefixRaw, cls: prefixCls } : undefined,\n    suffix: suffixRaw ? { raw: suffixRaw, cls: suffixCls } : undefined,\n  };\n}\n\n// Small penalty if hop Δ is outside preferred range; small bonus if inside.\n// edgeWeight is tiny by design so it never dominates interior windows.\nexport function edgeBiasPenalty(deltaAbs: number, cls: string | null, edgeWeight = 0.25): number {\n  if (!cls) return 0;\n  const pref = CLASS_DELTA_PREF[cls] ?? [0, 3];\n  const [lo, hi] = pref;\n  if (deltaAbs >= lo && deltaAbs <= hi) {\n    return -edgeWeight; // tiny reward for alignment\n  }\n  // distance outside range\n  const dist = deltaAbs < lo ? (lo - deltaAbs) : (deltaAbs - hi);\n  return edgeWeight * Math.min(2, dist); // cap\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3235, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/functions/sevenVoicesCore.ts"],"sourcesContent":["\n// @ts-nocheck\n\nimport { getManifest, EngineManifest } from \"../engine/manifest\";\nimport { computeC, extractBase, normalizeTerminalY, readWindowsDebug, edgeBiasPenalty, type EdgeInfo } from \"./sevenVoicesC\";\nimport { chooseProfile, CClass } from \"./languages\";\n\nexport const VOWELS = [\"A\", \"E\", \"I\", \"O\", \"U\", \"Y\", \"Ë\"] as const;\nexport type Vowel = (typeof VOWELS)[number];\n\nexport const VOWEL_VALUE: Record<Vowel, number> = { A: 2, E: 3, I: 5, O: 7, U: 11, Y: 13, \"Ë\": 17 };\n\nexport type SolveOptions = {\n  beamWidth: number;\n  maxOps: number;\n  allowDelete: boolean;\n  allowClosure: boolean;\n  opCost: { sub: number; del: number; ins: number };\n  edgeWeight?: number;\n  manifest: EngineManifest;\n  alphabet: string;\n};\n\nexport type Path = {\n  voicePath: Vowel[];\n  ringPath: number[];\n  levelPath: number[];\n  ops: string[];\n  checksums: { V: number; E: number; C: number };\n  kept: number;\n};\n\n// --- Path Generation & State ---\ntype State = { seq: Vowel[]; E: number; ops: string[] };\n\nexport function checksumV(path) {\n  let product = 1;\n  const seen = new Set();\n  for (const v of path) {\n    if (!seen.has(v)) {\n      product *= VOWEL_VALUE[v];\n      seen.add(v);\n    }\n  }\n  return product;\n}\n\nfunction keptCount(base, cand) {\n  let k = 0;\n  for (let i = 0; i < Math.min(base.length, cand.length); i++)\n    if (base[i] === cand[i]) k++;\n  return k;\n}\n\nfunction mkPath(baseSeq, consClasses, seq, E, ops, RING, LVL) {\n  const voicePath = seq;\n  const p = {\n    voicePath,\n    ringPath: voicePath.map((v) => RING[v]),\n    levelPath: voicePath.map((v) => LVL[v]),\n    checksums: {\n      V: checksumV(voicePath),\n      E: E,\n      C: computeC(voicePath, consClasses, RING),\n    },\n    kept: keptCount(baseSeq, voicePath),\n    ops,\n  };\n\n  if (p.kept > Math.min(baseSeq.length, seq.length)) {\n    throw new Error(\n      `Keeps overflow: kept=${p.kept} base=${baseSeq.length} seq=${seq.length}`\n    );\n  }\n  if (ops.some((o) => o.startsWith(\"insert \") && o !== \"closure Ë\"))\n    throw new Error(\"Illegal insert op\");\n  return p;\n}\n\n\nfunction neighbors(st, opts) {\n  const out: any[] = [];\n  const seq = st.seq;\n  const { allowDelete, allowClosure, opCost } = opts;\n\n  // substitute\n  for (let i = 0; i < seq.length; i++) {\n    for (const v of VOWELS)\n      if (v !== seq[i]) {\n        const next = seq.slice();\n        next[i] = v;\n        out.push({\n          seq: next,\n          E: st.E + opCost.sub,\n          ops: [...st.ops, `${seq[i]}→${v}`],\n        });\n      }\n  }\n\n  // delete (optional)\n  if (allowDelete) {\n    for (let i = 0; i < seq.length; i++) {\n      const next = seq.slice(0, i).concat(seq.slice(i + 1));\n      if (!next.length) continue;\n      out.push({\n        seq: next,\n        E: st.E + opCost.del,\n        ops: [...st.ops, `delete ${seq[i]}`],\n      });\n    }\n  }\n\n  // insert closure Ë (optional) — THE ONLY INSERT ALLOWED\n  if (allowClosure && seq[seq.length - 1] !== \"Ë\") {\n    const next = seq.concat(\"Ë\");\n    out.push({\n      seq: next,\n      E: st.E + opCost.ins,\n      ops: [...st.ops, \"closure Ë\"],\n    });\n  }\n\n  return out;\n}\n\n// --- Path Scoring ---\nconst ringPenalty = (p, RING) => {\n  let d = 0;\n  for (let i = 0; i < p.length - 1; i++)\n    d += Math.abs(RING[p[i]] - RING[p[i + 1]]);\n  return d;\n};\nfunction preferClosureTie(a, b) {\n  const enda = a[a.length - 1] === \"Ë\" ? 0 : 1;\n  const endb = b[b.length - 1] === \"Ë\" ? 0 : 1;\n  return enda - endb;\n}\n\nfunction scoreTuple(p, RING) {\n  const { E, V, C } = p.checksums;\n  return [E, ringPenalty(p.voicePath, RING), C, -p.kept];\n}\n\n\n// --- Main Solver ---\nexport function solveWord(word, opts: any = {}, alphabet) {\n    const manifest = (opts && opts.manifest) ? opts.manifest : getManifest();\n    const RING = manifest.ringIndex;\n    const LVL  = manifest.levelIndex;\n    const EDGE_W = typeof opts.edgeWeight === 'number' ? opts.edgeWeight : manifest.edgeWeight;\n    const opCost = opts.opCost ?? manifest.opCost;\n\n    const rawBase = extractBase(word);\n    const base = normalizeTerminalY(rawBase, word);\n    const baseSeq = base.length ? base : ([\"O\"] as Vowel[]);\n\n    const profile = chooseProfile(word, alphabet === \"auto\" ? undefined : alphabet);\n    const { windows, classes: consClasses, edge, edgeWindows } = readWindowsDebug(word, baseSeq, profile);\n    \n    const K = opts.beamWidth;\n    const maxOps = opts.maxOps;\n\n    let paths: Path[] = [];\n    const q: State[] = [{ seq: baseSeq, E: 0, ops: [] }];\n    const visited = new Set([baseSeq.join(\"\")]);\n\n    while (q.length > 0) {\n        const st = q.shift();\n        if(!st) continue;\n        if (st.ops.length > maxOps) continue;\n        \n        const p = mkPath(baseSeq, consClasses, st.seq, st.E, st.ops, RING, LVL);\n        paths.push(p);\n\n        const nextStates = neighbors(st, { ...opts, opCost });\n        for (const n of nextStates) {\n            const key = n.seq.join(\"\");\n            if (visited.has(key)) continue;\n            visited.add(key);\n            q.push(n);\n        }\n    }\n\n    const uniqPaths = Array.from(new Map(paths.map(p => [p.voicePath.join(\"\"), p])).values());\n    \n    // Apply edge bias as a final scoring step BEFORE sorting\n    for (const p of uniqPaths) {\n        let edgePenalty = 0;\n        if (p.voicePath.length > 1) {\n            if (edge.prefix?.cls) {\n                const dPrefix = Math.abs(RING[p.voicePath[1]] - RING[p.voicePath[0]]);\n                edgePenalty += edgeBiasPenalty(dPrefix, edge.prefix.cls, EDGE_W);\n            }\n            if (edge.suffix?.cls) {\n                const lastHopIdx = p.voicePath.length - 2;\n                const dSuffix = Math.abs(RING[p.voicePath[lastHopIdx + 1]] - RING[p.voicePath[lastHopIdx]]);\n                edgePenalty += edgeBiasPenalty(dSuffix, edge.suffix.cls, EDGE_W);\n            }\n        }\n        p.checksums.E += edgePenalty;\n    }\n\n    uniqPaths.sort((p, q) => {\n        const A = scoreTuple(p, RING), B = scoreTuple(q, RING);\n        for(let i=0; i<A.length; i++) if (A[i] !== B[i]) return A[i] - B[i];\n        return preferClosureTie(p.voicePath, q.voicePath);\n    });\n\n    const primary = uniqPaths[0];\n\n    const frontier = uniqPaths\n        .slice(1, K)\n        .filter(p => p.checksums.E <= (primary.checksums.E || 0) + 2);\n    \n    const signals = [\n        `base_raw=${rawBase.join(\"\") || \"-\"}`,\n        `base_norm=${base.join(\"\") || \"-\"}`,\n        `cons_windows=${consClasses.join(\",\") || \"-\"}`,\n        ...edgeWindows,\n        `alphabet=${profile.id}`\n    ];\n\n    return {\n        engineVersion: manifest.version,\n        primaryPath: primary,\n        frontierPaths: frontier,\n        windows,\n        windowClasses: consClasses,\n        edgeWindows,\n        signals,\n    };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3463, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/runAnalysis.ts"],"sourcesContent":["\n// src/lib/runAnalysis.ts\nimport { solveWord } from \"../functions/sevenVoicesCore\";\nimport type { SolveOptions as SolveWordOptions } from \"../functions/sevenVoicesCore\";\n\nexport type Alphabet = \"auto\"|\"albanian\"|\"latin\"|\"sanskrit\"|\"ancient_greek\"|\"pie\"|\"turkish\"|\"german\";\nexport const ENGINE_VERSION = process.env.NEXT_PUBLIC_ENGINE_VERSION ?? \"dev\";\n\n// Whatever solveWord returns is your core engine result:\nexport type SolveWordResult = ReturnType<typeof solveWord>;\n\n// This is what the app & JSON export will see.\nexport type AnalysisResult = SolveWordResult & {\n  engineVersion: string;\n  word: string;\n  mode: string;\n  alphabet: string;\n};\n\n/**\n * Central wrapper for the Seven-Voices engine.\n * Ensures consistent metadata is attached to the raw result.\n * @param word The word to analyze.\n * @param opts The solver options.\n * @param alphabet The alphabet profile to use.\n * @returns A full analysis result with engine metadata.\n */\nexport function runAnalysis(\n  word: string,\n  opts: SolveWordOptions,\n  alphabet: Alphabet\n): AnalysisResult {\n  const trimmed = word.trim();\n  const baseResult = solveWord(trimmed, opts, alphabet);\n\n  return {\n    ...baseResult,\n    engineVersion: ENGINE_VERSION,\n    word: trimmed,\n    mode: opts.allowDelete ? 'open' : 'strict',\n    alphabet: alphabet\n  };\n}\n"],"names":[],"mappings":"AACA,yBAAyB;;;;;AACzB;;AAIO,MAAM,iBAAiB,QAAQ,GAAG,CAAC,0BAA0B,IAAI;AAqBjE,SAAS,YACd,IAAY,EACZ,IAAsB,EACtB,QAAkB;IAElB,MAAM,UAAU,KAAK,IAAI;IACzB,MAAM,aAAa,CAAA,GAAA,mIAAA,CAAA,YAAS,AAAD,EAAE,SAAS,MAAM;IAE5C,OAAO;QACL,GAAG,UAAU;QACb,eAAe;QACf,MAAM;QACN,MAAM,KAAK,WAAW,GAAG,SAAS;QAClC,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 3488, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/sanitize.ts"],"sourcesContent":["\n// Drops undefined recursively by serializing; preserves primitives/arrays/objects.\n// Do NOT include firebase FieldValue sentinels in the object you pass in.\nexport function sanitizeForFirestore<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n"],"names":[],"mappings":"AACA,mFAAmF;AACnF,0EAA0E;;;;AACnE,SAAS,qBAAwB,GAAM;IAC5C,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;AACnC","debugId":null}},
    {"offset": {"line": 3502, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/alphabet/cues.ts"],"sourcesContent":["\nexport type Family = \"albanian\"|\"latin\"|\"sanskrit\"|\"ancient_greek\"|\"pie\";\n\nexport type FamilyCues = {\n  // hard signals\n  script?: RegExp;        // e.g., Greek, Devanagari\n  diacritics?: RegExp;    // language-typical diacritics in Latin script\n  // soft signals\n  digraphs?: string[];    // bh, dh, gj, qu, etc.\n  morphemes?: string[];   // common affixes/roots\n  // weights (tune once)\n  weights?: { script?:number; diacritics?:number; digraph?:number; morpheme?:number; vp?:number };\n};\n\nexport const CUES: Record<Family, FamilyCues> = {\n  albanian: {\n    diacritics: /[ëç]/i,\n    digraphs: [\"gj\",\"q\",\"xh\",\"ll\",\"rr\",\"nj\",\"zh\",\"sh\",\"dh\",\"th\"],\n    morphemes: [\"vet\",\"vetë\",\"vend\",\"vendos\",\"shqip\",\"bashk\",\"komb\",\"-im\",\"-tar\",\"-ues\",\"-shëm\",\"-tari\",\"-imi\"],\n    weights: { diacritics:3, digraph:2, morpheme:1, vp:0.5 }\n  },\n  latin: {\n    // ASCII stays possible; Latin diacritics common in Romance\n    diacritics: /[àèìòùáéíóúăĕĭŏŭâêîôûç]/i,\n    digraphs: [\"qu\",\"ph\",\"ti\",\"ci\"],            // ph, qu, ti(V), ci(V)\n    morphemes: [\"tion\",\"tio\",\"ct\",\"ment\",\"ous\",\"tione\",\"able\",\"ible\"],\n    weights: { diacritics:2, digraph:1, morpheme:1, vp:0.5 }\n  },\n  sanskrit: {\n    script: /[\\u0900-\\u097F]/,                  // Devanagari\n    diacritics: /[āīūṛṝḷḹṃḥñṅṇśṣṭḍ]/i,         // IAST\n    digraphs: [\"bh\",\"dh\",\"gh\",\"kh\",\"ch\",\"jh\",\"ṭh\",\"ḍh\"],\n    morphemes: [\"dharma\",\"karma\",\"yoga\",\"mantra\",\"ātma\",\"puruṣa\"],\n    weights: { script:4, diacritics:3, digraph:1, morpheme:1, vp:0.5 }\n  },\n  ancient_greek: {\n    script: /[\\u0370-\\u03FF]/,                  // Greek\n    diacritics: /[ΆΈΉΊΌΎΏάέήίόύώϊϋΐΰ]/,        // tonos/dialytika\n    digraphs: [\"ph\",\"ch\",\"th\",\"ps\",\"kh\"],\n    morphemes: [\"logos\",\"-logy\",\"-polis\",\"-phobia\",\"-phile\",\"-graph\"],\n    weights: { script:4, diacritics:2, digraph:1, morpheme:1, vp:0.5 }\n  },\n  pie: {\n    // Not a script; only a tiny nudge by A/E/O distribution from voicePath\n    weights: { vp:0.3 }\n  }\n};\n"],"names":[],"mappings":";;;AAcO,MAAM,OAAmC;IAC9C,UAAU;QACR,YAAY;QACZ,UAAU;YAAC;YAAK;YAAI;YAAK;YAAK;YAAK;YAAK;YAAK;YAAK;YAAK;SAAK;QAC5D,WAAW;YAAC;YAAM;YAAO;YAAO;YAAS;YAAQ;YAAQ;YAAO;YAAM;YAAO;YAAO;YAAQ;YAAQ;SAAO;QAC3G,SAAS;YAAE,YAAW;YAAG,SAAQ;YAAG,UAAS;YAAG,IAAG;QAAI;IACzD;IACA,OAAO;QACL,2DAA2D;QAC3D,YAAY;QACZ,UAAU;YAAC;YAAK;YAAK;YAAK;SAAK;QAC/B,WAAW;YAAC;YAAO;YAAM;YAAK;YAAO;YAAM;YAAQ;YAAO;SAAO;QACjE,SAAS;YAAE,YAAW;YAAG,SAAQ;YAAG,UAAS;YAAG,IAAG;QAAI;IACzD;IACA,UAAU;QACR,QAAQ;QACR,YAAY;QACZ,UAAU;YAAC;YAAK;YAAK;YAAK;YAAK;YAAK;YAAK;YAAK;SAAK;QACnD,WAAW;YAAC;YAAS;YAAQ;YAAO;YAAS;YAAO;SAAS;QAC7D,SAAS;YAAE,QAAO;YAAG,YAAW;YAAG,SAAQ;YAAG,UAAS;YAAG,IAAG;QAAI;IACnE;IACA,eAAe;QACb,QAAQ;QACR,YAAY;QACZ,UAAU;YAAC;YAAK;YAAK;YAAK;YAAK;SAAK;QACpC,WAAW;YAAC;YAAQ;YAAQ;YAAS;YAAU;YAAS;SAAS;QACjE,SAAS;YAAE,QAAO;YAAG,YAAW;YAAG,SAAQ;YAAG,UAAS;YAAG,IAAG;QAAI;IACnE;IACA,KAAK;QACH,uEAAuE;QACvE,SAAS;YAAE,IAAG;QAAI;IACpB;AACF","debugId":null}},
    {"offset": {"line": 3636, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/detectDialect.ts"],"sourcesContent":["// src/lib/detectDialect.ts\n\nexport type AlbanianDialect = \"geg\" | \"tosk\";\n\nexport function detectAlbanianDialect(raw: string): AlbanianDialect {\n  // Normalize, just in case\n  const normalized = raw.normalize(\"NFC\");\n\n  // Very simple heuristic for now:\n  // - Words with ë → Tosk-orthography\n  // - Words without ë → default to Geg\n  const hasEWithDots = /ë/i.test(normalized);\n  return hasEWithDots ? \"tosk\" : \"geg\";\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;AAIpB,SAAS,sBAAsB,GAAW;IAC/C,0BAA0B;IAC1B,MAAM,aAAa,IAAI,SAAS,CAAC;IAEjC,iCAAiC;IACjC,oCAAoC;IACpC,qCAAqC;IACrC,MAAM,eAAe,KAAK,IAAI,CAAC;IAC/B,OAAO,eAAe,SAAS;AACjC","debugId":null}},
    {"offset": {"line": 3655, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/alphabet/autoDetect.ts"],"sourcesContent":["\nimport { CUES, Family } from \"./cues\";\nimport { detectAlbanianDialect } from \"../detectDialect\";\n\nexport type Alphabet = \"auto\"|Family;\n\nfunction countHits(w: string, list?: string[]) {\n  if (!list || list.length === 0) return 0;\n  const s = w.toLowerCase();\n  return list.reduce((n, x) => n + (s.includes(x) ? 1 : 0), 0);\n}\n\nfunction scoreFamily(word: string, voicePath: string[], fam: Family) {\n  const cfg = CUES[fam];\n  const W = { script:1, diacritics:1, digraph:1, morpheme:1, vp:1, ...(cfg.weights||{}) };\n\n  const w = word.normalize(\"NFC\");\n  let score = 0;\n\n  if (cfg.script && cfg.script.test(w))      score += W.script;\n  if (cfg.diacritics && cfg.diacritics.test(w)) score += W.diacritics;\n  if (cfg.digraphs)   score += countHits(w, cfg.digraphs)   * W.digraph;\n  if (cfg.morphemes)  score += countHits(w, cfg.morphemes)  * W.morpheme;\n\n  // voicePath distribution: presence of A/E/O gives a tiny nudge to PIE/Latin/Greek roots\n  const vp = (voicePath||[]).join(\"\");\n  if (/[AEO]/.test(vp)) score += W.vp;\n\n  return score;\n}\n\nexport type DetectResult = { winner: Family; scores: { family: Family; score: number }[] };\n\nexport function detectAlphabetFair(word: string, voicePath: string[], selected: Alphabet): DetectResult {\n  if (selected !== \"auto\") {\n    // respect explicit user choice, but still compute scores for display\n    const scores = ([\"albanian\",\"latin\",\"sanskrit\",\"ancient_greek\",\"pie\"] as Family[])\n      .map(f => ({ family:f, score: scoreFamily(word, voicePath, f) }))\n      .sort((a,b)=> b.score - a.score);\n    return { winner: selected as Family, scores };\n  }\n\n  const families = [\"albanian\",\"latin\",\"sanskrit\",\"ancient_greek\",\"pie\"] as Family[];\n  const scores = families.map(f => ({ family:f, score: scoreFamily(word, voicePath, f) }))\n                         .sort((a,b)=> b.score - a.score);\n\n  // normalize to percentages (for UI)\n  const sum = scores.reduce((s,x)=> s + x.score, 0) || 1;\n  const pct = scores.map(x => ({ family:x.family, score: Math.round((x.score/sum)*100) }));\n\n  // choose winner fairly: highest score; if all near-zero and ASCII, default latin\n  let winner = pct[0].family;\n  const allZeroish = scores.every(x => x.score === 0);\n  const asciiOnly = /^[\\u0000-\\u007F]*$/.test(word);\n  if (allZeroish && asciiOnly) winner = \"latin\";\n\n  // Dialect hint for Albanian\n  const albanianFamily = pct.find(f => f.family === 'albanian');\n  if (albanianFamily) {\n    (albanianFamily as any).dialect = detectAlbanianDialect(word);\n  }\n\n\n  return { winner, scores: pct };\n}\n"],"names":[],"mappings":";;;AACA;AACA;;;AAIA,SAAS,UAAU,CAAS,EAAE,IAAe;IAC3C,IAAI,CAAC,QAAQ,KAAK,MAAM,KAAK,GAAG,OAAO;IACvC,MAAM,IAAI,EAAE,WAAW;IACvB,OAAO,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,QAAQ,CAAC,KAAK,IAAI,CAAC,GAAG;AAC5D;AAEA,SAAS,YAAY,IAAY,EAAE,SAAmB,EAAE,GAAW;IACjE,MAAM,MAAM,8HAAA,CAAA,OAAI,CAAC,IAAI;IACrB,MAAM,IAAI;QAAE,QAAO;QAAG,YAAW;QAAG,SAAQ;QAAG,UAAS;QAAG,IAAG;QAAG,GAAI,IAAI,OAAO,IAAE,CAAC,CAAC;IAAE;IAEtF,MAAM,IAAI,KAAK,SAAS,CAAC;IACzB,IAAI,QAAQ;IAEZ,IAAI,IAAI,MAAM,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,IAAS,SAAS,EAAE,MAAM;IAC5D,IAAI,IAAI,UAAU,IAAI,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,SAAS,EAAE,UAAU;IACnE,IAAI,IAAI,QAAQ,EAAI,SAAS,UAAU,GAAG,IAAI,QAAQ,IAAM,EAAE,OAAO;IACrE,IAAI,IAAI,SAAS,EAAG,SAAS,UAAU,GAAG,IAAI,SAAS,IAAK,EAAE,QAAQ;IAEtE,wFAAwF;IACxF,MAAM,KAAK,CAAC,aAAW,EAAE,EAAE,IAAI,CAAC;IAChC,IAAI,QAAQ,IAAI,CAAC,KAAK,SAAS,EAAE,EAAE;IAEnC,OAAO;AACT;AAIO,SAAS,mBAAmB,IAAY,EAAE,SAAmB,EAAE,QAAkB;IACtF,IAAI,aAAa,QAAQ;QACvB,qEAAqE;QACrE,MAAM,SAAS,AAAC;YAAC;YAAW;YAAQ;YAAW;YAAgB;SAAM,CAClE,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,QAAO;gBAAG,OAAO,YAAY,MAAM,WAAW;YAAG,CAAC,GAC9D,IAAI,CAAC,CAAC,GAAE,IAAK,EAAE,KAAK,GAAG,EAAE,KAAK;QACjC,OAAO;YAAE,QAAQ;YAAoB;QAAO;IAC9C;IAEA,MAAM,WAAW;QAAC;QAAW;QAAQ;QAAW;QAAgB;KAAM;IACtE,MAAM,SAAS,SAAS,GAAG,CAAC,CAAA,IAAK,CAAC;YAAE,QAAO;YAAG,OAAO,YAAY,MAAM,WAAW;QAAG,CAAC,GAC9D,IAAI,CAAC,CAAC,GAAE,IAAK,EAAE,KAAK,GAAG,EAAE,KAAK;IAEtD,oCAAoC;IACpC,MAAM,MAAM,OAAO,MAAM,CAAC,CAAC,GAAE,IAAK,IAAI,EAAE,KAAK,EAAE,MAAM;IACrD,MAAM,MAAM,OAAO,GAAG,CAAC,CAAA,IAAK,CAAC;YAAE,QAAO,EAAE,MAAM;YAAE,OAAO,KAAK,KAAK,CAAC,AAAC,EAAE,KAAK,GAAC,MAAK;QAAK,CAAC;IAEtF,iFAAiF;IACjF,IAAI,SAAS,GAAG,CAAC,EAAE,CAAC,MAAM;IAC1B,MAAM,aAAa,OAAO,KAAK,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IACjD,MAAM,YAAY,qBAAqB,IAAI,CAAC;IAC5C,IAAI,cAAc,WAAW,SAAS;IAEtC,4BAA4B;IAC5B,MAAM,iBAAiB,IAAI,IAAI,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;IAClD,IAAI,gBAAgB;QACjB,eAAuB,OAAO,GAAG,CAAA,GAAA,2HAAA,CAAA,wBAAqB,AAAD,EAAE;IAC1D;IAGA,OAAO;QAAE;QAAQ,QAAQ;IAAI;AAC/B","debugId":null}},
    {"offset": {"line": 3744, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/analyzeClient.ts"],"sourcesContent":["\nimport { db, ensureAnon, auth } from \"./firebase\";\nimport { doc, getDoc, setDoc, serverTimestamp, collection, addDoc } from \"firebase/firestore\";\nimport { normalizeEnginePayload, type EnginePayload, type Vowel, LanguageFamily } from \"../shared/engineShape\";\nimport { logError } from \"./logError\";\nimport { runAnalysis, type AnalysisResult } from \"./runAnalysis\";\n\n// Browser-safe engine code:\nimport type { SolveOptions } from \"../functions/sevenVoicesCore\";\nimport { sanitizeForFirestore } from \"./sanitize\";\nimport { getManifest } from \"../engine/manifest\";\nimport { detectAlphabetFair } from \"./alphabet/autoDetect\";\n\n\ntype Mode = \"strict\" | \"open\";\ntype Alphabet = \"auto\"|\"albanian\"|\"latin\"|\"sanskrit\"|\"ancient_greek\"|\"pie\"|\"turkish\"|\"german\";\ntype AnalyzeOpts = {\n    bypass?: boolean;\n    skipWrite?: boolean;\n    payload?: EnginePayload; // Allow passing a payload to write\n    edgeWeight?: number;\n    useAi?: boolean; // New flag to control AI mapper\n};\n\n// NEW helper: safe join\nconst joinPath = (xs?: (string|Vowel)[]) => Array.isArray(xs) ? xs.join(\"→\") : \"\";\n\nfunction computeLocal(word: string, mode: Mode, alphabet: Alphabet, edgeWeight?: number): AnalysisResult {\n  const manifest = getManifest(); // Use default manifest for local compute\n  \n  const strict = mode === \"strict\";\n  const opCost = manifest.opCost;\n\n  // Initial detection without voice path to determine solver alphabet\n  const initialDet = detectAlphabetFair(word, [], alphabet);\n  const effectiveAlphabet = initialDet.winner;\n\n  const opts: SolveOptions = {\n    beamWidth: 8,\n    maxOps: strict ? 1 : 2,\n    allowDelete: !strict,\n    allowClosure: !strict,\n    opCost: opCost,\n    edgeWeight,\n    alphabet: effectiveAlphabet,\n    manifest,\n  };\n\n  const analysisResult = runAnalysis(word, opts, effectiveAlphabet);\n  \n  // Now, run detection *again* with the voice path to get final family scores\n  const finalDet = detectAlphabetFair(word, analysisResult.primaryPath.voicePath, alphabet);\n\n  const languageFamilies: LanguageFamily[] = finalDet.scores.map(s => ({\n    familyId: s.family,\n    label: s.family.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n    confidence: s.score / 100,\n    rationale: \"\", // No rationale from this detector\n    forms: [],\n    signals: [],\n    dialect: (s as any).dialect,\n  }));\n\n\n  // Construct canonical, then pass through normalizer (paranoid but consistent)\n  return normalizeEnginePayload({\n    ...analysisResult,\n    languageFamilies,\n  });\n}\n\nexport async function analyzeClient(word: string, mode: Mode, alphabet: Alphabet, opts: AnalyzeOpts = {}): Promise<AnalysisResult> {\n  await ensureAnon();\n  const manifest = getManifest();\n\n  // Initial detection to get a consistent cache key\n  const initialDet = detectAlphabetFair(word, [], alphabet);\n  const effectiveAlphabet = initialDet.winner;\n  const cacheId = `${word}|${mode}|${effectiveAlphabet}|${manifest.version}|ew:${opts.edgeWeight ?? manifest.edgeWeight}`;\n  \n  // If db isn't initialized, we can only do local computation.\n  if (!db) {\n    console.warn(\"Firestore not available. Skipping cache and returning local computation.\");\n    const result = computeLocal(word, mode, alphabet, opts.edgeWeight);\n    return { ...result, solveMs: 0, cacheHit: false };\n  }\n\n  const cacheRef = doc(db, \"analyses\", cacheId);\n  const t0 = Date.now();\n\n  try {\n    // BYPASS / WRITE-THROUGH: compute fresh or use provided payload, skip cache read\n    if (opts.bypass) {\n      const payloadToUse = opts.payload ? normalizeEnginePayload(opts.payload) : computeLocal(word, mode, alphabet, opts.edgeWeight);\n      \n      if (!opts.skipWrite) {\n        const cleanPayload = sanitizeForFirestore(payloadToUse);\n        await setDoc(cacheRef, { ...cleanPayload, cachedAt: serverTimestamp() }, { merge: true });\n      }\n      \n      void saveHistory(cacheId, payloadToUse, \"bypass\");\n      return { ...payloadToUse, recomputed: true, cacheHit: false, solveMs: Date.now() - t0 };\n    }\n\n    // Try cache -> normalize (in case older writes used a different shape)\n    const snap = await getDoc(cacheRef);\n    if (snap.exists()) {\n      const normalized = normalizeEnginePayload(snap.data());\n      // Re-run detection to ensure families are up to date with latest logic\n      const det = detectAlphabetFair(word, normalized.primaryPath.voicePath, alphabet);\n      normalized.languageFamilies = det.scores.map(s => ({\n          familyId: s.family,\n          label: s.family.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n          confidence: s.score / 100,\n          rationale: \"\", forms: [], signals: [],\n          dialect: (s as any).dialect,\n      }));\n      \n      void saveHistory(cacheId, normalized, \"cache\");\n      return { ...normalized, cacheHit: true, recomputed: false, solveMs: Date.now() - t0 };\n    }\n\n    // Miss → compute → write → return\n    const fresh = computeLocal(word, mode, alphabet, opts.edgeWeight);\n    const cleanFresh = sanitizeForFirestore(fresh);\n\n    await setDoc(cacheRef, { ...cleanFresh, cachedAt: serverTimestamp() }, { merge: false });\n    void saveHistory(cacheId, fresh, \"fresh\");\n    return { ...fresh, cacheHit: false, recomputed: false, solveMs: Date.now() - t0 };\n  } catch (e: any) {\n    logError({ where: \"analyzeClient\", message: e.message, detail: { word, mode, alphabet, stack: e.stack } });\n    throw e; // re-throw to be caught by UI\n  }\n}\n\nasync function saveHistory(\n  cacheId: string,\n  engine: AnalysisResult,\n  source: \"cache\"|\"fresh\"|\"bypass\"\n) {\n  if (!db) return; // Guard clause\n  const u = auth?.currentUser;\n  if (!u) return;\n\n  try {\n    const ref = collection(db, \"users\", u.uid, \"history\");\n\n    const word = String(engine?.word ?? \"\");\n    const mode = String(engine?.mode ?? \"strict\");\n    const alphabet = String(engine?.alphabet ?? \"auto\");\n    const engineVersion = String(engine?.engineVersion ?? \"unknown\");\n    const primaryPath = engine?.primaryPath ?? {};\n    const voicePath = primaryPath?.voicePath ?? [];\n    const ringPath  = primaryPath?.ringPath  ?? [];\n    const levelPath = primaryPath?.levelPath ?? [];\n    const primaryVoice = joinPath(voicePath);\n\n    const docData = {\n      cacheId, word, mode, alphabet, engineVersion, source,\n      primaryVoice,\n      voicePath, ringPath, levelPath,\n      solveMs: engine?.solveMs ?? null,\n      cacheHit: !!engine?.cacheHit,\n      createdAt: serverTimestamp(),\n    };\n\n    // strip undefineds\n    const clean = JSON.parse(JSON.stringify(docData));\n    await addDoc(ref, clean);\n  } catch(e:any) {\n    logError({ where: \"saveHistory\", message: e.message, detail: e.stack });\n    // This is non-critical, so don't throw to the user\n  }\n}\n\n\nconst PREFETCH_SEEN = new Set<string>();\n\nexport async function prefetchAnalyze(\n  word: string,\n  mode: \"strict\" | \"open\",\n  alphabet: Alphabet,\n  callbacks?: { onStart?: () => void; onFinish?: () => void }\n) {\n  if (!word || word.length < 3) {\n    callbacks?.onFinish?.();\n    return;\n  }\n  await ensureAnon();\n  const manifest = getManifest();\n  const initialDet = detectAlphabetFair(word, [], alphabet);\n  const effectiveAlphabet = initialDet.winner;\n  const cacheId = `${word}|${mode}|${effectiveAlphabet}|${manifest.version}|ew:${manifest.edgeWeight}`;\n  if (PREFETCH_SEEN.has(cacheId)) {\n    callbacks?.onFinish?.();\n    return;\n  }\n\n  // If db isn't initialized, we can't prefetch.\n  if (!db) {\n    callbacks?.onFinish?.();\n    return;\n  }\n\n  const cacheRef = doc(db, \"analyses\", cacheId);\n  const snap = await getDoc(cacheRef);\n  if (snap.exists()) {\n    callbacks?.onFinish?.();\n    return;\n  }\n\n  callbacks?.onStart?.();\n  PREFETCH_SEEN.add(cacheId);\n\n  try {\n    const fresh = computeLocal(word, mode, alphabet);\n    const cleanFresh = sanitizeForFirestore(fresh);\n    await setDoc(cacheRef, { ...cleanFresh, cachedAt: serverTimestamp() }, { merge: false });\n\n  } catch (e) {\n    console.warn(\"Prefetch failed\", e);\n  } finally {\n    callbacks?.onFinish?.();\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3986, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"../../lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4184, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ThemeProvider.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Moon, Sun } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\n\nimport { Button } from \"./ui/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"./ui/dropdown-menu\"\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  return <>{children}</>\n}\n\nexport function ThemeToggle() {\n  const { setTheme } = useTheme()\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"outline\" size=\"icon\">\n          <Sun className=\"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0\" />\n          <Moon className=\"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100\" />\n          <span className=\"sr-only\">Toggle theme</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\">\n        <DropdownMenuItem onClick={() => setTheme(\"light\")}>\n          Light\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"dark\")}>\n          Dark\n        </DropdownMenuItem>\n        <DropdownMenuItem onClick={() => setTheme(\"system\")}>\n          System\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAcO,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACvE,qBAAO;kBAAG;;AACZ;AAEO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,gJAAA,CAAA,WAAQ,AAAD;IAE5B,qBACE,8OAAC,4IAAA,CAAA,eAAY;;0BACX,8OAAC,4IAAA,CAAA,sBAAmB;gBAAC,OAAO;0BAC1B,cAAA,8OAAC,kIAAA,CAAA,SAAM;oBAAC,SAAQ;oBAAU,MAAK;;sCAC7B,8OAAC,gMAAA,CAAA,MAAG;4BAAC,WAAU;;;;;;sCACf,8OAAC,kMAAA,CAAA,OAAI;4BAAC,WAAU;;;;;;sCAChB,8OAAC;4BAAK,WAAU;sCAAU;;;;;;;;;;;;;;;;;0BAG9B,8OAAC,4IAAA,CAAA,sBAAmB;gBAAC,OAAM;;kCACzB,8OAAC,4IAAA,CAAA,mBAAgB;wBAAC,SAAS,IAAM,SAAS;kCAAU;;;;;;kCAGpD,8OAAC,4IAAA,CAAA,mBAAgB;wBAAC,SAAS,IAAM,SAAS;kCAAS;;;;;;kCAGnD,8OAAC,4IAAA,CAAA,mBAAgB;wBAAC,SAAS,IAAM,SAAS;kCAAW;;;;;;;;;;;;;;;;;;AAM7D","debugId":null}},
    {"offset": {"line": 4294, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/useDebounced.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport function useDebounced<T>(value: T, delay = 400) {\n  const [debounced, setDebounced] = useState(value);\n  useEffect(() => {\n    const t = setTimeout(() => setDebounced(value), delay);\n    return () => clearTimeout(t);\n  }, [value, delay]);\n  return debounced;\n}\n"],"names":[],"mappings":";;;AAAA;;AAEO,SAAS,aAAgB,KAAQ,EAAE,QAAQ,GAAG;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,IAAI,WAAW,IAAM,aAAa,QAAQ;QAChD,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;QAAO;KAAM;IACjB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 4316, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ComparePanel.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { analyzeClient } from \"../lib/analyzeClient\";\nimport type { Alphabet } from \"../lib/runAnalysis\";\nimport { PROFILES } from \"../functions/languages\";\nimport { Card } from \"./ui/card\";\nimport { Input } from \"./ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"./ui/select\";\nimport { Button } from \"./ui/button\";\n\ntype Mode = \"strict\" | \"open\";\n\nexport default function ComparePanel({\n  defaultMode = \"strict\",\n  defaultAlphabet = \"auto\",\n}: { defaultMode?: Mode; defaultAlphabet?: Alphabet }) {\n  const [leftWord, setLeftWord] = useState(\"damage\");\n  const [rightWord, setRightWord] = useState(\"study\");\n  const [mode, setMode] = useState<Mode>(defaultMode);\n  const [alphabet, setAlphabet] = useState<Alphabet>(defaultAlphabet);\n  const [left, setLeft] = useState<any>(null);\n  const [right, setRight] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const h = new URL(window.location.href).hash || \"\";\n    const m = h.match(/#compare=([^&]+)/);\n    if (m?.[1]) setRightWord(decodeURIComponent(m[1]));\n  }, []);\n\n  async function runCompare() {\n    if (!leftWord.trim() || !rightWord.trim()) return;\n    setLoading(true);\n    try {\n      const [L, R] = await Promise.all([\n        analyzeClient(leftWord.trim(), mode, alphabet),\n        analyzeClient(rightWord.trim(), mode, alphabet),\n      ]);\n      setLeft(L);\n      setRight(R);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  const share = `/?word=${encodeURIComponent(leftWord)}&mode=${mode}&alphabet=${alphabet}`\n    + `#compare=${encodeURIComponent(rightWord)}`;\n\n  const eqPrimary = left?.analysis?.primary?.voice_path?.join(\",\") === right?.analysis?.primary?.voice_path?.join(\",\");\n\n  return (\n    <Card className=\"p-4 space-y-3\">\n      <h3 className=\"font-bold text-sm tracking-wide\">Compare Two Words</h3>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2.5\">\n        <Input value={leftWord} onChange={e=>setLeftWord(e.target.value)} placeholder=\"Left word (e.g., damage)\" />\n        <Input value={rightWord} onChange={e=>setRightWord(e.target.value)} placeholder=\"Right word (e.g., study)\" />\n      </div>\n\n      <div className=\"flex flex-wrap gap-2.5 items-center\">\n        <label className=\"flex items-center gap-2 text-sm\">\n            <input type=\"checkbox\" checked={mode===\"strict\"} onChange={e=> setMode(e.target.checked?\"strict\":\"open\")} className=\"w-4 h-4 rounded text-primary focus:ring-primary\" />\n            Strict\n        </label>\n        <Select value={alphabet} onValueChange={(v) => setAlphabet(v as Alphabet)}>\n            <SelectTrigger className=\"w-[180px]\">\n                <SelectValue placeholder=\"Language\" />\n            </SelectTrigger>\n            <SelectContent>\n                <SelectItem value=\"auto\">Auto-Detect</SelectItem>\n                {PROFILES.map(p => (\n                    <SelectItem key={p.id} value={p.id}>{p.id.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</SelectItem>\n                ))}\n            </SelectContent>\n        </Select>\n\n        <Button onClick={runCompare} disabled={loading}>\n          {loading ? \"Comparing…\" : \"Compare\"}\n        </Button>\n\n        {(left || right) && (\n          <a className=\"underline text-xs\" href={share}>Share left + mode/alphabet</a>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n        <ResultCard title={leftWord} data={left} />\n        <ResultCard title={rightWord} data={right} />\n      </div>\n\n      {(left && right) && (\n        <div className=\"text-sm mt-2 font-semibold\">\n          Primary paths equal? {eqPrimary ? \"Yes\" : \"No\"}\n        </div>\n      )}\n    </Card>\n  );\n}\n\nfunction ResultCard({ title, data }: { title: string; data: any }) {\n  const analysis = data?.analysis;\n  return (\n    <Card className=\"p-3 text-sm\">\n      <div className=\"font-semibold\">{title}</div>\n      {!analysis ? (\n        <div className=\"opacity-70 text-xs py-2\">—</div>\n      ) : (\n        <div className=\"space-y-1 mt-2\">\n          <div className=\"text-xs opacity-80\">\n            {analysis.mode} · {analysis.alphabet}\n            {data.cacheHit && <span className=\"ml-2 px-1.5 py-0.5 text-xs rounded bg-accent/20 border border-accent text-accent-foreground\">Cached</span>}\n          </div>\n          <div><b>Primary:</b> {analysis.primary?.voice_path?.join(\" → \")}</div>\n          <div><b>Checksums:</b> V={analysis.primary?.checksums?.V} · E={analysis.primary?.checksums?.E} · C={analysis.primary?.checksums?.C}</div>\n          {!!analysis.windowClasses?.length && (\n            <div><b>Windows:</b> {analysis.windowClasses.join(\" | \")}</div>\n          )}\n        </div>\n      )}\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4658, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/HistoryPanel.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { db, auth, ensureAnon } from \"../lib/firebase\";\nimport {\n  collection,\n  query,\n  orderBy,\n  limit,\n  getDocs,\n  startAfter,\n  deleteDoc,\n  doc,\n  writeBatch,\n  DocumentData,\n  QueryDocumentSnapshot,\n} from \"firebase/firestore\";\n\ntype Row = {\n  id: string;\n  cacheId: string;\n  word: string;\n  mode: string;\n  alphabet: string;\n  engineVersion: string;\n  source: string;\n  primaryVoice?: string;\n  createdAt?: any; // Firestore Timestamp\n};\n\nexport default function HistoryPanel({\n  onLoadAnalysis,\n  onRecompute,\n}: {\n  onLoadAnalysis: (cacheId: string) => Promise<void>;\n  onRecompute: (word: string, mode?: string, alphabet?: string) => Promise<void>;\n}) {\n  const [rows, setRows] = useState<Row[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState<string | null>(null);\n\n  const [mode, setMode] = useState<\"all\" | \"strict\" | \"open\">(\"all\");\n  const [alphabet, setAlphabet] = useState<\n    \"all\" | \"auto\" | \"albanian\" | \"latin\" | \"sanskrit\" | \"ancient_greek\" | \"pie\" | \"turkish\" | \"german\"\n  >(\"all\");\n  const [wordFilter, setWordFilter] = useState(\"\");\n  const [uid, setUid] = useState<string | null>(null);\n\n  useEffect(() => {\n    ensureAnon().then(user => setUid(user.uid));\n  }, []);\n\n  const baseQuery = useMemo(() => {\n    if (!uid || !db) return null;\n    const col = collection(db, \"users\", uid, \"history\");\n    return query(col, orderBy(\"createdAt\", \"desc\"), limit(20));\n  }, [uid]);\n\n  async function load(reset = true) {\n    if (!uid || !baseQuery || !db) {\n        if (!db) console.warn(\"HistoryPanel: Firestore not available.\");\n        return;\n    }\n    setLoading(true);\n    setErr(null);\n    try {\n      const snap = await getDocs(baseQuery);\n      const mapped: Row[] = snap.docs.map((d) => {\n        const x = d.data() as any;\n        return {\n          id: d.id,\n          cacheId: String(x.cacheId || \"\"),\n          word: String(x.word || \"\"),\n          mode: String(x.mode || \"\"),\n          alphabet: String(x.alphabet || \"\"),\n          engineVersion: String(x.engineVersion || \"\"),\n          source: String(x.source || \"\"),\n          primaryVoice: x.primaryVoice ? String(x.primaryVoice) : undefined,\n          createdAt: x.createdAt,\n        };\n      });\n\n      const filtered = mapped.filter((r) => {\n        if (mode !== \"all\" && r.mode !== mode) return false;\n        if (alphabet !== \"all\" && r.alphabet !== alphabet) return false;\n        if (wordFilter && !r.word?.toLowerCase().includes(wordFilter.toLowerCase()))\n          return false;\n        return true;\n      });\n\n      setRows(reset ? filtered : filtered);\n    } catch (e: any) {\n      setErr(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (uid) {\n        load(true);\n    }\n  }, [uid, baseQuery, mode, alphabet, wordFilter]);\n\n  async function deleteRow(row: Row) {\n    if (!uid || !db) return;\n    const ok = window.confirm(\n      `Delete history entry for \"${row.word}\"? This cannot be undone.`\n    );\n    if (!ok) return;\n\n    setLoading(true);\n    setErr(null);\n    try {\n      await deleteDoc(doc(db, \"users\", uid, \"history\", row.id));\n\n      if (row.cacheId) {\n        const also = window.confirm(\n          \"Also delete the shared cache entry (analyses) for this item?\"\n        );\n        if (also) {\n          await deleteDoc(doc(db, \"analyses\", row.cacheId));\n        }\n      }\n\n      await load(true); // refresh so UI reflects state immediately\n    } catch (e: any) {\n      setErr(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function clearAll() {\n    if (!uid || !db) return;\n\n    // Step 1 — explicit confirm\n    const sure = window.confirm(\n      \"Delete ALL your history entries? This cannot be undone.\"\n    );\n    if (!sure) return;\n\n    // Step 2 — typed confirmation\n    const token = window.prompt('Type CLEAR to confirm bulk delete:');\n    if (token !== \"CLEAR\") return;\n\n    setLoading(true);\n    setErr(null);\n    try {\n      let last: QueryDocumentSnapshot<DocumentData> | null = null;\n      let total = 0;\n\n      while (true) {\n        const q = query(\n          collection(db, \"users\", uid, \"history\"),\n          orderBy(\"createdAt\", \"desc\"),\n          ...(last ? [startAfter(last)] : []),\n          limit(200)\n        );\n        const snap = await getDocs(q);\n        if (snap.empty) break;\n\n        const batch = writeBatch(db);\n        snap.docs.forEach((d) => batch.delete(d.ref));\n        await batch.commit();\n\n        total += snap.docs.length;\n        last = snap.docs[snap.docs.length - 1];\n        if (snap.docs.length < 200) break;\n      }\n\n      setRows([]);\n      await load(true);\n      alert(`Deleted ${total} history entr${total === 1 ? \"y\" : \"ies\"}.`);\n    } catch (e: any) {\n      setErr(e?.message || String(e));\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"border rounded-lg p-3 bg-card\">\n      <div className=\"flex flex-wrap gap-2 items-end mb-3\">\n        <div className=\"flex flex-col\">\n          <label className=\"text-xs text-muted-foreground\">Mode</label>\n          <select\n            className=\"border rounded px-2 py-1 text-sm bg-background\"\n            value={mode}\n            onChange={(e) => setMode(e.target.value as any)}\n          >\n            <option value=\"all\">All</option>\n            <option value=\"strict\">strict</option>\n            <option value=\"open\">open</option>\n          </select>\n        </div>\n        <div className=\"flex flex-col\">\n          <label className=\"text-xs text-muted-foreground\">Alphabet</label>\n          <select\n            className=\"border rounded px-2 py-1 text-sm bg-background\"\n            value={alphabet}\n            onChange={(e) => setAlphabet(e.target.value as any)}\n          >\n            <option value=\"all\">All</option>\n            <option value=\"auto\">auto</option>\n            <option value=\"albanian\">albanian</option>\n            <option value=\"latin\">latin</option>\n            <option value=\"sanskrit\">sanskrit</option>\n            <option value=\"ancient_greek\">ancient_greek</option>\n            <option value=\"pie\">pie</option>\n            <option value=\"turkish\">turkish</option>\n            <option value=\"german\">german</option>\n          </select>\n        </div>\n        <div className=\"flex flex-col grow\">\n          <label className=\"text-xs text-muted-foreground\">Word</label>\n          <input\n            className=\"border rounded px-2 py-1 text-sm bg-background\"\n            placeholder=\"search…\"\n            value={wordFilter}\n            onChange={(e) => setWordFilter(e.target.value)}\n          />\n        </div>\n\n        <button\n          className=\"border rounded px-3 py-1 text-sm\"\n          onClick={() => load(true)}\n          disabled={loading}\n        >\n          {loading ? \"Loading…\" : \"Refresh\"}\n        </button>\n        <button\n          className=\"border rounded px-3 py-1 text-sm text-red-700 border-red-300\"\n          onClick={clearAll}\n          disabled={loading}\n          title=\"Delete ALL your history entries\"\n        >\n          {loading ? \"…\" : \"Clear All\"}\n        </button>\n      </div>\n\n      {err && <div className=\"text-red-700 text-sm mb-2\">Error: {err}</div>}\n\n      <div className=\"divide-y\">\n        {rows.map((r) => (\n          <div key={r.id} className=\"py-2 flex items-center justify-between gap-3\">\n            <div className=\"min-w-0\">\n              <div className=\"text-sm font-semibold truncate\">\n                {r.word}{\" \"}\n                <span className=\"font-normal opacity-70\">\n                  ({r.mode} · {r.alphabet})\n                </span>\n              </div>\n              <div className=\"text-xs opacity-70 truncate\">\n                {r.primaryVoice ? `Voice: ${r.primaryVoice}` : \"—\"}\n                <span className=\"mx-1\">·</span>\n                eng {r.engineVersion}\n                {r.createdAt?.toDate && (\n                  <>\n                    <span className=\"mx-1\">·</span>\n                    {r.createdAt.toDate().toLocaleString()}\n                  </>\n                )}\n              </div>\n            </div>\n            <div className=\"flex gap-2 shrink-0\">\n              <button\n                className=\"border rounded px-2 py-1 text-xs\"\n                title=\"Load cached analysis\"\n                onClick={() => onLoadAnalysis(r.cacheId)}\n              >\n                Load\n              </button>\n              <button\n                className=\"border rounded px-2 py-1 text-xs\"\n                title=\"Recompute (bypass cache)\"\n                onClick={() => onRecompute(r.word, r.mode, r.alphabet)}\n              >\n                Recompute\n              </button>\n              <button\n                className=\"border rounded px-2 py-1 text-xs text-red-700 border-red-300\"\n                title=\"Delete this history row\"\n                onClick={() => deleteRow(r)}\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        ))}\n        {rows.length === 0 && !loading && (\n          <div className=\"text-xs opacity-60 py-4 text-center\">No history matching filters.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5160, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/FooterBuild.tsx"],"sourcesContent":["export default function FooterBuild() {\n  return (\n    <div className=\"text-[11px] opacity-70 mt-6\">\n      Engine: <b>{process.env.NEXT_PUBLIC_ENGINE_VERSION || \"dev\"}</b>\n      {\" · \"}Commit: <b>{process.env.NEXT_PUBLIC_COMMIT?.slice(0,7) || \"local\"}</b>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;YAA8B;0BACnC,8OAAC;0BAAG,QAAQ,GAAG,CAAC,0BAA0B,IAAI;;;;;;YACrD;YAAM;0BAAQ,8OAAC;0BAAG,QAAQ,GAAG,CAAC,kBAAkB,EAAE,MAAM,GAAE,MAAM;;;;;;;;;;;;AAGvE","debugId":null}},
    {"offset": {"line": 5199, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/throttle.ts"],"sourcesContent":["\nlet hits: number[] = [];\nexport function allowAnalyze(max=5, windowMs=10_000) {\n  const now = Date.now();\n  hits = hits.filter(t => now - t < windowMs);\n  if (hits.length >= max) return false;\n  hits.push(now);\n  return true;\n}\n"],"names":[],"mappings":";;;AACA,IAAI,OAAiB,EAAE;AAChB,SAAS,aAAa,MAAI,CAAC,EAAE,WAAS,MAAM;IACjD,MAAM,MAAM,KAAK,GAAG;IACpB,OAAO,KAAK,MAAM,CAAC,CAAA,IAAK,MAAM,IAAI;IAClC,IAAI,KAAK,MAAM,IAAI,KAAK,OAAO;IAC/B,KAAK,IAAI,CAAC;IACV,OAAO;AACT","debugId":null}},
    {"offset": {"line": 5216, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/WhyThisPath.tsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\nimport type { EnginePath } from \"../shared/engineShape\";\n\nexport default function WhyThisPath({ primary }: { primary: EnginePath }) {\n  const v = primary?.voicePath ?? [];\n  const r = primary?.ringPath ?? [];\n  const L = primary?.levelPath ?? [];\n  const ops = primary?.ops ?? [];\n  const costs = (primary as any)?.stepCosts ?? []; // Safely access optional property\n\n  if (!v.length) return null;\n\n  function delta(a?: number, b?: number) {\n    if (a === undefined || b === undefined) return \"—\";\n    const d = Math.abs((b as number) - (a as number));\n    return d.toString();\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-base\">Why This Path?</CardTitle>\n      </CardHeader>\n      <CardContent className=\"text-sm\">\n        <div className=\"grid grid-cols-6 gap-2 font-medium text-xs opacity-70 mb-1 px-3\">\n          <div>Step</div><div>Vowel</div><div>ΔRing</div><div>ΔLevel</div><div className=\"col-span-2\">Op</div>\n        </div>\n        <div className=\"divide-y\">\n          {v.map((vv, i) => {\n            const dRing = i===0 ? \"0\" : delta(r[i-1], r[i]);\n            const dLvl  = i===0 ? \"0\" : delta(L[i-1], L[i]);\n            const op    = ops[i] ?? (i===0 ? \"start\" : \"hop\");\n            return (\n              <div key={i} className=\"grid grid-cols-6 gap-2 py-2 px-3\">\n                <div className=\"opacity-80\">{i+1}</div>\n                <div className=\"font-semibold\">{vv}</div>\n                <div>{dRing}</div>\n                <div>{dLvl}</div>\n                <div className=\"truncate col-span-2\">{op}</div>\n              </div>\n            );\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAKe,SAAS,YAAY,EAAE,OAAO,EAA2B;IACtE,MAAM,IAAI,SAAS,aAAa,EAAE;IAClC,MAAM,IAAI,SAAS,YAAY,EAAE;IACjC,MAAM,IAAI,SAAS,aAAa,EAAE;IAClC,MAAM,MAAM,SAAS,OAAO,EAAE;IAC9B,MAAM,QAAQ,AAAC,SAAiB,aAAa,EAAE,EAAE,kCAAkC;IAEnF,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO;IAEtB,SAAS,MAAM,CAAU,EAAE,CAAU;QACnC,IAAI,MAAM,aAAa,MAAM,WAAW,OAAO;QAC/C,MAAM,IAAI,KAAK,GAAG,CAAC,AAAC,IAAgB;QACpC,OAAO,EAAE,QAAQ;IACnB;IAEA,qBACE,8OAAC,gIAAA,CAAA,OAAI;;0BACH,8OAAC,gIAAA,CAAA,aAAU;0BACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;oBAAC,WAAU;8BAAY;;;;;;;;;;;0BAEnC,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAI;;;;;;0CAAU,8OAAC;0CAAI;;;;;;0CAAW,8OAAC;0CAAI;;;;;;0CAAW,8OAAC;0CAAI;;;;;;0CAAY,8OAAC;gCAAI,WAAU;0CAAa;;;;;;;;;;;;kCAE9F,8OAAC;wBAAI,WAAU;kCACZ,EAAE,GAAG,CAAC,CAAC,IAAI;4BACV,MAAM,QAAQ,MAAI,IAAI,MAAM,MAAM,CAAC,CAAC,IAAE,EAAE,EAAE,CAAC,CAAC,EAAE;4BAC9C,MAAM,OAAQ,MAAI,IAAI,MAAM,MAAM,CAAC,CAAC,IAAE,EAAE,EAAE,CAAC,CAAC,EAAE;4BAC9C,MAAM,KAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,MAAI,IAAI,UAAU,KAAK;4BAChD,qBACE,8OAAC;gCAAY,WAAU;;kDACrB,8OAAC;wCAAI,WAAU;kDAAc,IAAE;;;;;;kDAC/B,8OAAC;wCAAI,WAAU;kDAAiB;;;;;;kDAChC,8OAAC;kDAAK;;;;;;kDACN,8OAAC;kDAAK;;;;;;kDACN,8OAAC;wCAAI,WAAU;kDAAuB;;;;;;;+BAL9B;;;;;wBAQd;;;;;;;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 5378, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ExportJsonButton.tsx"],"sourcesContent":["// src/components/ExportJsonButton.tsx\n\"use client\";\n\nimport { Button } from \"./ui/button\";\nimport type { AnalysisResult } from \"../lib/runAnalysis\";\n\ntype ExportJsonButtonProps = {\n  analysis: AnalysisResult;\n};\n\nexport function ExportJsonButton({ analysis }: ExportJsonButtonProps) {\n  const handleExport = () => {\n    // stringify the full engine payload\n    const json = JSON.stringify(analysis, null, 2);\n\n    const blob = new Blob([json], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n\n    // make a simple, safe filename: analysis-<word>-<version>.json\n    const safeWord = (analysis.word || \"\").replace(/\\s+/g, \"_\");\n    const version = analysis.engineVersion || \"dev\";\n    const fileName = `analysis-${safeWord}-${version}.json`;\n\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = fileName;\n    a.click();\n\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={handleExport}\n    >\n      Export JSON\n    </Button>\n  );\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AAGtC;AAFA;;;AASO,SAAS,iBAAiB,EAAE,QAAQ,EAAyB;IAClE,MAAM,eAAe;QACnB,oCAAoC;QACpC,MAAM,OAAO,KAAK,SAAS,CAAC,UAAU,MAAM;QAE5C,MAAM,OAAO,IAAI,KAAK;YAAC;SAAK,EAAE;YAAE,MAAM;QAAmB;QACzD,MAAM,MAAM,IAAI,eAAe,CAAC;QAEhC,+DAA+D;QAC/D,MAAM,WAAW,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,OAAO,CAAC,QAAQ;QACvD,MAAM,UAAU,SAAS,aAAa,IAAI;QAC1C,MAAM,WAAW,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,QAAQ,KAAK,CAAC;QAEvD,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG;QACb,EAAE,KAAK;QAEP,IAAI,eAAe,CAAC;IACtB;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;kBACV;;;;;;AAIL","debugId":null}},
    {"offset": {"line": 5424, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/EvalPanel.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState } from \"react\";\nimport { solveWord } from \"../functions/sevenVoicesCore\";\nimport { getManifest } from \"../engine/manifest\";\nimport { Button } from \"./ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"./ui/select\";\nimport { Card } from \"./ui/card\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"./ui/table\";\nimport { Input } from \"./ui/input\";\nimport { logError } from \"../lib/logError\";\nimport { useToast } from \"../hooks/use-toast\";\n\ntype Mode = \"strict\"|\"open\";\ntype Alphabet = \"auto\"|\"albanian\"|\"latin\"|\"sanskrit\"|\"ancient_greek\"|\"pie\";\n\nfunction normalizeExpected(s?: string) {\n  if (!s) return \"\";\n  const only = s.toUpperCase().replace(/[^AEIOUYË]/g, \"\");\n  return only.split(\"\").join(\"→\");\n}\nfunction joinPath(v?: string[]) { return (v||[]).join(\"→\"); }\n\nfunction toCSV(rows: string[][]) {\n  return rows.map(r => r.map(x => `\"${(x ?? \"\").replace(/\"/g,'\"\"')}\"`).join(\",\")).join(\"\\n\");\n}\nfunction download(name: string, content: string) {\n  const blob = new Blob([content], { type: \"text/csv;charset=utf-8\" });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\"); a.href = url; a.download = name; a.click();\n  URL.revokeObjectURL(url);\n}\n\nexport default function EvalPanel() {\n  const { toast } = useToast();\n  const [rows, setRows] = useState<any[]>([]);\n  const [metrics, setMetrics] = useState<{accuracy:number|null; labeled:number; total:number}>({accuracy:null, labeled:0, total:0});\n  const [busy, setBusy] = useState(false);\n  const [modeDefault, setModeDefault] = useState<Mode>(\"strict\");\n  const [alphabetDefault, setAlphabetDefault] = useState<Alphabet>(\"auto\");\n\n  async function onFile(e: React.ChangeEvent<HTMLInputElement>) {\n    const f = e.target.files?.[0]; if (!f) return;\n    setBusy(true);\n    try {\n      const text = await f.text();\n      const lines = text.split(/\\r?\\n/).filter(x => x.trim().length>0);\n      const header = lines[0].split(\",\").map(h => h.trim().toLowerCase());\n      const idx = (name:string)=> header.indexOf(name);\n      const iWord = idx(\"word\"); if (iWord<0) throw new Error('CSV needs \"word\" column');\n      const iExp  = idx(\"expected\");\n      const iMode = idx(\"mode\");\n      const iAlpha = idx(\"alphabet\");\n\n      const manifest = getManifest(process.env.NEXT_PUBLIC_ENGINE_VERSION);\n      const out: any[] = [];\n      let labeled=0, correct=0;\n\n      for (let i=1;i<lines.length;i++) {\n        const cols = lines[i].split(\",\").map(c=>c.trim());\n        const word = cols[iWord];\n        const expected = normalizeExpected(iExp>=0 ? cols[iExp] : \"\");\n        const mode = (cols[iMode] as Mode) || modeDefault;\n        const alphabet = (cols[iAlpha] as Alphabet) || alphabetDefault;\n\n        const opCost = manifest.opCost;\n        const opts = mode === \"strict\"\n          ? { beamWidth:8, maxOps:1, allowDelete:false, allowClosure:false, opCost, alphabet, manifest, edgeWeight: manifest.edgeWeight }\n          : { beamWidth:8, maxOps:2, allowDelete:true, allowClosure:true,  opCost, alphabet, manifest, edgeWeight: manifest.edgeWeight };\n\n        const res:any = solveWord(word, opts, alphabet);\n        const predicted = joinPath(res?.primaryPath?.voicePath);\n        const ok = expected ? (predicted === expected) : null;\n        if (expected) { labeled++; if (ok) correct++; }\n        out.push({ word, expected, predicted, ok, mode, alphabet });\n      }\n\n      setRows(out);\n      setMetrics({\n        accuracy: labeled ? +(correct/labeled).toFixed(4) : null,\n        labeled, total: out.length\n      });\n    } catch (err:any) {\n      logError({ where: \"eval-panel-parse\", message: err.message, detail: err.stack });\n      toast({ variant: \"destructive\", title: \"CSV Error\", description: err.message || \"Failed to parse file.\" });\n    } finally {\n      setBusy(false);\n      (e.target as HTMLInputElement).value = \"\";\n    }\n  }\n\n  function downloadPreds() {\n    const head = [\"word\",\"expected\",\"predicted\",\"ok\",\"mode\",\"alphabet\"];\n    const body = rows.map(r => [r.word, r.expected, r.predicted, r.ok===null?\"\":(r.ok?1:0), r.mode, r.alphabet]);\n    download(\"predictions.csv\", toCSV([head, ...body]));\n  }\n  function downloadConfusion() {\n    const labels = Array.from(new Set<string>([\n      ...rows.filter(r=>r.expected).map(r=>r.expected),\n      ...rows.map(r=>r.predicted)\n    ].filter(Boolean))).sort();\n    const map = new Map<string, number>();\n    for (const r of rows) {\n      if (!r.expected) continue;\n      const key = `${r.expected}|${r.predicted}`;\n      map.set(key, (map.get(key)||0)+1);\n    }\n    const head = [\"expected \\\\ predicted\", ...labels];\n    const table: string[][] = [head];\n    for (const exp of labels) {\n      const row = [exp, ...labels.map(pred => String(map.get(`${exp}|${pred}`)||0))];\n      table.push(row);\n    }\n    download(\"confusion.csv\", toCSV(table));\n  }\n\n  return (\n    <Card className=\"p-4 space-y-2\">\n      <h2 className=\"text-xl font-semibold\">Batch Eval</h2>\n      <div className=\"text-xs opacity-80\">Upload CSV with headers: <code>word,expected,mode,alphabet</code></div>\n      <div className=\"flex gap-2 items-center\">\n        <label className=\"text-xs\">Default mode</label>\n        <Select value={modeDefault} onValueChange={(v: Mode) => setModeDefault(v)}>\n          <SelectTrigger className=\"text-sm h-8\">\n            <SelectValue/>\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"strict\">strict</SelectItem>\n            <SelectItem value=\"open\">open</SelectItem>\n          </SelectContent>\n        </Select>\n        <label className=\"text-xs\">Default alphabet</label>\n        <Select value={alphabetDefault} onValueChange={(v: Alphabet) => setAlphabetDefault(v)}>\n          <SelectTrigger className=\"text-sm h-8\">\n            <SelectValue/>\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"auto\">auto</SelectItem>\n            <SelectItem value=\"albanian\">albanian</SelectItem>\n            <SelectItem value=\"latin\">latin</SelectItem>\n            <SelectItem value=\"sanskrit\">sanskrit</SelectItem>\n            <SelectItem value=\"ancient_greek\">ancient_greek</SelectItem>\n            <SelectItem value=\"pie\">pie</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Button asChild variant=\"default\" size=\"sm\" className=\"ml-auto\">\n          <label className=\"cursor-pointer\">\n            {busy ? \"Processing…\" : \"Upload CSV\"}\n            <Input type=\"file\" accept=\".csv\" className=\"hidden\" onChange={onFile} />\n          </label>\n        </Button>\n      </div>\n\n      <div className=\"text-xs opacity-80\">\n        Labeled: <b>{metrics.labeled}</b> / Total: <b>{metrics.total}</b>\n        {metrics.accuracy !== null && <> · Accuracy: <b>{(metrics.accuracy*100).toFixed(2)}%</b></>}\n      </div>\n\n      {rows.length > 0 && (\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={downloadPreds}>Download predictions.csv</Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={downloadConfusion}>Download confusion.csv</Button>\n        </div>\n      )}\n\n      {rows.length > 0 && (\n        <Card className=\"max-h-64 overflow-auto border rounded\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>word</TableHead>\n                <TableHead>expected</TableHead>\n                <TableHead>predicted</TableHead>\n                <TableHead>ok</TableHead>\n                <TableHead>mode</TableHead>\n                <TableHead>alphabet</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {rows.map((r,i)=>(\n                <TableRow key={i}>\n                  <TableCell className=\"font-medium\">{r.word}</TableCell>\n                  <TableCell className=\"text-green-700 dark:text-green-400\">{r.expected}</TableCell>\n                  <TableCell className=\"font-semibold\">{r.predicted}</TableCell>\n                  <TableCell className=\"text-center\">{r.ok===null ? \"—\" : (r.ok ? \"✅\" : \"❌\")}</TableCell>\n                  <TableCell>{r.mode}</TableCell>\n                  <TableCell>{r.alphabet}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Card>\n      )}\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6035, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useToast } from \"../hooks/use-toast\";\nimport { Button } from \"../components/ui/button\";\nimport { Card } from \"../components/ui/card\";\nimport { Input } from \"../components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"../components/ui/select\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"../components/ui/accordion\";\nimport { Candidates } from \"../components/Candidates\";\nimport { ResultsDisplay, PrinciplesBlock } from \"../components/ResultsDisplay\";\nimport { ConsonantReference } from \"../components/ConsonantReference\";\nimport { TwoRailsWithConsonants } from \"../components/TwoRailsWithConsonants\";\nimport { analyzeClient } from \"../lib/analyzeClient\";\nimport type { Alphabet } from \"../lib/runAnalysis\";\nimport { PROFILES } from \"../functions/languages\";\nimport { ThemeToggle } from \"../components/ThemeProvider\";\nimport { useDebounced } from \"../hooks/useDebounced\";\nimport { Loader } from \"lucide-react\";\nimport ComparePanel from \"../components/ComparePanel\";\nimport { normalizeEnginePayload, type EnginePayload, type Vowel } from \"../shared/engineShape\";\nimport HistoryPanel from \"../components/HistoryPanel\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { db } from \"../lib/firebase\";\nimport FooterBuild from \"../components/FooterBuild\";\nimport { allowAnalyze } from \"../lib/throttle\";\nimport WhyThisPath from \"../components/WhyThisPath\";\nimport { ExportJsonButton } from \"../components/ExportJsonButton\";\nimport { logError } from \"../lib/logError\";\n\nlet EvalPanelComp: React.ComponentType | null = null;\nif (process.env.NEXT_PUBLIC_DEV_EVAL === \"1\") {\n  EvalPanelComp = require(\"../components/EvalPanel\").default;\n}\n\n\n// ==== Main App ===============================================================\nexport default function LinguisticDecoderApp(){\n  const { toast } = useToast();\n  const [word, setWord] = useState(\"study\");\n  const [mode, setMode] = useState<\"strict\"|\"open\">(\"strict\");\n  const [alphabet, setAlphabet] = useState<Alphabet>(\"auto\");\n  const [edgeWeight, setEdgeWeight] = useState(0.25);\n  const [data, setData] = useState<EnginePayload | null>(null);\n  const [err, setErr] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [isWarming, setIsWarming] = useState(false);\n  const [showDebug, setShowDebug] = useState(false);\n  const [useAi, setUseAi] = useState(false);\n\n  // Debounce user input, then warm the cache in the background\n  const debouncedWord = useDebounced(word, 450);\n  useEffect(() => {\n    // This is a pre-fetch, so we don't handle errors here.\n    // analyzeClient is designed to be robust.\n    if (debouncedWord.trim()) {\n      analyzeClient(debouncedWord.trim(), mode, alphabet, { edgeWeight, useAi }).catch(() => {/* prefetch failed, do nothing */});\n    }\n  }, [debouncedWord, mode, alphabet, edgeWeight, useAi]);\n  \n\n  const canAnalyze = word.trim().length > 0 && !loading;\n\n  async function analyze(nextWord?: string, nextMode?: \"strict\"|\"open\", nextAlphabet?: Alphabet){\n    if (!allowAnalyze()) { \n      toast({ variant: \"destructive\", title: \"Too many requests\", description: \"Please try again in a few moments.\" }); \n      return; \n    }\n    const useWord = (nextWord ?? word).trim();\n    const useMode: \"strict\"|\"open\" = nextMode ?? mode;\n    const useAlphabet = nextAlphabet ?? alphabet;\n    if (!useWord) return;\n\n    setLoading(true);\n    setErr(null);\n    setData(null);\n    try {\n      // 1. Get raw result from API or cache\n      const clientResponse = await analyzeClient(useWord, useMode, useAlphabet, { edgeWeight, useAi });\n      console.log(\"API result:\", clientResponse);\n\n      // 2. GUARANTEE the shape\n      const normalizedPayload = normalizeEnginePayload(clientResponse);\n      console.debug(\"Primary Path object:\", normalizedPayload.primaryPath);\n      \n      // 4. Set state with the clean, final payload\n      setData(normalizedPayload);\n\n    } catch (e: any) {\n      const error = e?.message || \"Request failed\";\n      logError({ where: \"analyze\", message: error, detail: { word: useWord, stack: e.stack } });\n      console.error(\"Analysis chain failed:\", e);\n      setErr(error);\n      setData(null);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function runSmokeTest() {\n    const mock: any = {\n        engineVersion: \"mock-v1\",\n        word: \"smoke-test\",\n        mode: \"strict\",\n        alphabet: \"auto\",\n        primaryPath: { voicePath: [\"U\",\"I\"], ringPath: [1,1], levelPath: [-1,1], ops: [\"test-op\"], kept: 2, checksums: {V:55, E:0, C:2} },\n        frontierPaths: [\n            { voicePath: [\"A\",\"E\"], ringPath: [3,2], levelPath: [1,1], ops: [], checksums: {V:6, E:1, C:1}, kept: 0 },\n        ],\n        windows: [\"d\"],\n        windowClasses: [\"Plosive\"],\n        signals: [\"smoke-test-signal\"],\n        solveMs: 1,\n        languageFamilies: [],\n    };\n    try {\n        const normalized = normalizeEnginePayload(mock);\n        setData(normalized);\n        setErr(null);\n        toast({ title: \"Smoke Test\", description: \"Displaying mock data for 'study'.\" });\n    } catch(e:any){\n        setErr(`Smoke test failed: ${e.message}`);\n        setData(null);\n    }\n  }\n\n\n  useEffect(() => {\n    const p = new URLSearchParams(window.location.search);\n    const w = p.get(\"word\"); \n    const m = p.get(\"mode\") as \"strict\"|\"open\" | null; \n    const a = p.get(\"alphabet\") as Alphabet | null;\n    if (w) { \n      const currentWord = w;\n      const currentMode = m || 'strict';\n      const currentAlphabet = a || 'auto';\n      setWord(currentWord); \n      setMode(currentMode); \n      setAlphabet(currentAlphabet); \n      analyze(currentWord, currentMode, currentAlphabet); \n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function onLoadAnalysis(cacheId: string) {\n    if (!db) {\n        toast({ variant: \"destructive\", title: \"Database Error\", description: \"Firestore is not available.\" });\n        return;\n    }\n    setLoading(true);\n    setErr(null);\n    setData(null);\n    try {\n      const cacheRef = doc(db, \"analyses\", cacheId);\n      const snap = await getDoc(cacheRef);\n      if (snap.exists()) {\n          const normalized = normalizeEnginePayload(snap.data());\n          setData({ ...normalized, cacheHit: true, recomputed: false });\n          toast({ title: \"Loaded from Cache\", description: `Analysis for '${normalized.word}' loaded.` });\n      } else {\n          toast({ variant: \"destructive\", title: \"Not Found\", description: \"Could not find that analysis in the cache.\" });\n      }\n    } catch (e: any) {\n        logError({where: \"history-load\", message: e.message, detail: {cacheId}});\n        toast({ variant: \"destructive\", title: \"Load Error\", description: e.message || \"Failed to load analysis.\" });\n        setErr(e.message);\n    } finally {\n        setLoading(false);\n    }\n  }\n\n  async function onRecompute(word: string, m?: string, a?: string) {\n      setLoading(true);\n      setData(null);\n      setErr(null);\n      try {\n          const result = await analyzeClient(word, (m as any) || mode, (a as any) || alphabet, {\n            bypass: true,\n            skipWrite: false,\n            edgeWeight,\n            useAi\n          });\n          setData(result);\n          toast({ title: \"Recomputed\", description: `Fresh analysis for '${result.word}' complete.` });\n      } catch (e: any) {\n          logError({where: \"history-recompute\", message: e.message, detail: {word}});\n          toast({ variant: \"destructive\", title: \"Recompute Error\", description: e.message || \"Failed to recompute analysis.\" });\n          setErr(e.message);\n      } finally {\n          setLoading(false);\n      }\n  }\n\n  const signals = data?.signals?.join(\" · \") || \"\";\n  \n  return (\n    <div className=\"p-4 lg:p-8 max-w-4xl mx-auto\">\n       <main className=\"space-y-4\">\n        {/* Header */}\n        <header className=\"p-6 border-b bg-card -mx-6 -mt-8\">\n          <div className=\"max-w-5xl mx-auto flex justify-between items-center\">\n            <div>\n              <h1 className=\"text-3xl font-bold tracking-wide text-primary\">Linguistic Decoder</h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">Seven‑Voices matrix solver · primary & frontier paths · optional Gemini mapping</p>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <ThemeToggle />\n            </div>\n          </div>\n        </header>\n\n        {/* Controls */}\n        <Card className=\"p-4\">\n          <div className=\"grid grid-cols-[1fr_auto_auto_auto] gap-2.5 items-center\">\n            <Input\n              value={word}\n              onChange={e=> setWord(e.target.value)}\n              placeholder=\"Type a word…\"\n              className=\"font-semibold\"\n              onKeyUp={(e) => e.key === 'Enter' && canAnalyze && analyze()}\n            />\n            {isWarming && <Loader className=\"animate-spin text-muted-foreground\" size={18} />}\n            <Select value={alphabet} onValueChange={(v) => setAlphabet(v as Alphabet)}>\n                <SelectTrigger className=\"w-[180px]\">\n                    <SelectValue placeholder=\"Language\" />\n                </SelectTrigger>\n                <SelectContent>\n                    <SelectItem value=\"auto\">Auto-Detect</SelectItem>\n                    {PROFILES.map(p => (\n                        <SelectItem key={p.id} value={p.id}>{p.id.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</SelectItem>\n                    ))}\n                </SelectContent>\n            </Select>\n            <Button onClick={()=> analyze()} disabled={!canAnalyze}>\n              {loading ? \"Analyzing…\" : \"Analyze\"}\n            </Button>\n            <Button onClick={runSmokeTest} variant=\"outline\" title=\"Display a mock result to test the UI\">Smoke Test</Button>\n          </div>\n          <div className=\"flex items-center gap-4 mt-3 pt-3 border-t\">\n              <label className=\"flex items-center gap-2 text-sm\">\n                <input type=\"checkbox\" checked={mode===\"strict\"} onChange={e=> setMode(e.target.checked?\"strict\":\"open\")} className=\"w-4 h-4 rounded text-primary focus:ring-primary\" />\n                Strict\n              </label>\n              <label className=\"text-xs text-muted-foreground\">Edge weight: {edgeWeight.toFixed(2)}</label>\n              <input\n                type=\"range\" min={0} max={0.6} step={0.05}\n                value={edgeWeight} onChange={e=>setEdgeWeight(Number(e.target.value))}\n                className=\"w-32\"\n              />\n              <label className=\"flex items-center gap-2 text-sm ml-auto\">\n                  <input type=\"checkbox\" checked={useAi} onChange={e=> setUseAi(e.target.checked)} className=\"w-4 h-4 rounded text-primary focus:ring-primary\" />\n                  Use AI Mapper\n              </label>\n          </div>\n          {err && (\n            <div className=\"mt-2.5 border border-red-300 bg-red-50 text-red-800 text-sm p-2 rounded\">\n              <b>Error:</b> {err}\n            </div>\n          )}\n           {data?.cacheHit && <div className=\"mt-2.5 text-sm font-semibold text-accent-foreground\">Result loaded from cache.</div>}\n        </Card>\n\n        {/* Visualization & Results */}\n        <TwoRailsWithConsonants\n          word={data?.word || word}\n          path={(data?.primaryPath?.voicePath as Vowel[]) || []}\n          running={loading}\n          playKey={`${data?.word}|${(data?.primaryPath?.voicePath || []).join(\"\")}`}\n          height={320}\n          durationPerHopMs={900}\n        />\n        \n        {data ? (\n          <>\n            <ResultsDisplay analysis={data} />\n            <div className=\"flex justify-end pt-2\">\n              <ExportJsonButton analysis={data} />\n            </div>\n            <WhyThisPath primary={data.primaryPath} />\n            <PrinciplesBlock engine={data} />\n            <Candidates items={data.languageFamilies} />\n          </>\n        ) : null}\n\n        <Accordion type=\"single\" collapsible className=\"w-full\" defaultValue={data ? \"\" : \"item-1\"}>\n          {!data && (\n            <AccordionItem value=\"item-1\">\n              <AccordionTrigger>How to Use</AccordionTrigger>\n              <AccordionContent>\n                <Card className=\"p-5\">\n                  <ol className=\"list-decimal pl-5 mt-2 space-y-2 text-sm\">\n                    <li>Type a word and click <kbd className=\"bg-primary text-primary-foreground rounded-md px-2 py-1 text-xs font-semibold\">Analyze</kbd>.</li>\n                    <li>Use the dropdown to force a specific phonetic profile, or leave on \"Auto-Detect\".</li>\n                    <li>Primary block shows Voice / Level / Ring paths and checksums <span className=\"font-code\">V/E/C</span>.</li>\n                    <li>Frontier lists near‑optimal alternates (deterministic order).</li>\n                    <li>If mapping is enabled server‑side, language candidates appear below.</li>\n                  </ol>\n                </Card>\n              </AccordionContent>\n            </AccordionItem>\n          )}\n          <AccordionItem value=\"item-2\">\n            <AccordionTrigger>Compare Two Words</AccordionTrigger>\n            <AccordionContent>\n              <ComparePanel defaultMode={mode} defaultAlphabet={alphabet} />\n            </AccordionContent>\n          </AccordionItem>\n          <AccordionItem value=\"item-3\">\n            <AccordionTrigger>Consonant Reference</AccordionTrigger>\n            <AccordionContent>\n              <ConsonantReference />\n            </AccordionContent>\n          </AccordionItem>\n          <AccordionItem value=\"item-4\">\n            <AccordionTrigger>History</AccordionTrigger>\n            <AccordionContent>\n                <HistoryPanel onLoadAnalysis={onLoadAnalysis} onRecompute={onRecompute} />\n            </AccordionContent>\n          </AccordionItem>\n          {EvalPanelComp && (\n            <AccordionItem value=\"item-5\">\n              <AccordionTrigger>Batch Evaluation</AccordionTrigger>\n              <AccordionContent>\n                  <EvalPanelComp />\n              </AccordionContent>\n            </AccordionItem>\n          )}\n        </Accordion>\n\n        {/* Debug view */}\n        {showDebug && data && (\n          <div className=\"my-4\">\n              <Card className=\"p-4\">\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <h3 className=\"font-bold text-sm tracking-wide\">API Echo (debug)</h3>\n                  </div>\n                  <pre className=\"font-code text-xs whitespace-pre-wrap bg-slate-50 dark:bg-slate-800 p-2.5 rounded-lg max-h-96 overflow-auto mt-2\">\n                      {JSON.stringify(data, null, 2)}\n                  </pre>\n              </Card>\n          </div>\n        )}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"p-6 opacity-80\">\n        <div className=\"max-w-7xl mx-auto text-xs text-slate-500 flex justify-between items-start\">\n          <div className=\"font-code flex-1\">\n            {data && (\n              <div className=\"text-xs opacity-80 pt-2\">\n                <b>Diagnostics:</b>\n                <span className=\"ml-2\">engine={data.engineVersion}</span>\n                <span className=\"ml-2\">mode={data.mode}</span>\n                <span className=\"ml-2\">alphabet={data.alphabet}</span>\n                {\"solveMs\" in data && <span className=\"ml-2\">solveMs={data.solveMs}</span>}\n                {data?.cacheHit && <span className=\"ml-2 px-1.5 py-0.5 rounded bg-accent/20 border border-accent text-accent-foreground\">cacheHit</span>}\n                {data?.recomputed && <span className=\"ml-2 px-1.5 py-0.5 rounded bg-blue-100 dark:bg-blue-900 border border-blue-300 dark:border-blue-700\">recomputed</span>}\n                <div className=\"mt-1\">{signals}</div>\n              </div>\n            )}\n          </div>\n          <div className=\"flex items-center gap-4\">\n            {data && (\n              <Link\n                className=\"underline text-xs\"\n                href={`/?word=${encodeURIComponent(word)}&mode=${mode}&alphabet=${alphabet}`}\n              >\n                Share this result\n              </Link>\n            )}\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setShowDebug(s => !s)}>\n              {showDebug ? \"Hide\" : \"Show\"} Debug\n            </Button>\n          </div>\n        </div>\n        <FooterBuild />\n      </footer>\n    </div>\n  );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}}]
}